<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>OSWorkflow Coverage Report</title>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../style.css" TITLE="Style">
</head>
<body>
  <!-- render overall pkg coverage graph -->
<TABLE cellspacing="0" cellpadding="2">
  <TBODY>
    <!-- / Users/ hani/ projects/ osworkflow/ src/ java/ com/ opensymphony/ workflow/ AbstractWorkflow.java -->
  <TR>
    <TD colspan="6" class="reportHeader">
    <TABLE width="100%"><TR><TD valign="top" class="titleText">Clover coverage report -  OSWorkflow Coverage Report<DIV class="timestamp"><b>Coverage timestamp:</b>&nbsp;Wed Oct 8 2003 20:31:22 EDT</DIV>
            <DIV class="navBar"><a href="../../../pkgs-summary.html"><b>Overview</b></a>&nbsp;&nbsp;&nbsp;<a href="pkg-summary.html"><b>Package</b></a>&nbsp;&nbsp;&nbsp;<font class="navBarCurrent">File</font></DIV>
    </TD>
         <td class="headerStats" valign="top" width="40%" align="right">
        <table align="right">
         <tr>
           <td nowrap><b>file stats:</b></td>
           <td align="right"><b>LOC:</b></td>
           <td align="right">1,315</td>
           <td width="10%">&nbsp;</td>
           <td align="right"><b>Methods:</b></td>
           <td align="right">44</td>
         </tr>
         <tr>
           <td></td>
           <td align="right"><b>NCLOC:</b></td>
           <td align="right">886</td>
           <td width="10%">&nbsp;</td>
           <td align="right"><b>Classes:</b></td>
           <td align="right">1</td>
         </tr>
      </table>
     </td>
    </TR></TABLE>
   </TD>
  </TR>

<TR><TD class="hbreak" colspan="6">&nbsp;</TD></TR>
  <TR>
    <TD class="graphHeaderLeft"><b>&nbsp;Source file</b></TD>
    <TD class="graphHeader">Conditionals</TD>
    <TD class="graphHeader">Statements</TD>
    <TD class="graphHeader">Methods</TD>
    <TD class="graphHeader" align="left" colspan="2"><B>TOTAL</B></TD>
  </TR>   
  <TR>
    <TD class="graphItem">
        	   AbstractWorkflow.java
	    </TD>
   
    <TD class="graphPercent" align="center">63.3%</TD>
    <TD class="graphPercent" align="center">71.2%</TD>
    <TD class="graphPercent" align="center">72.7%</TD>
    <TD class="graphBarLeft" align="center"><B>68.8%</B></TD>
    <TD class="graphBar">
            <TABLE class="barGraph" cellspacing="0">
        <TBODY>
          <TR>
	               <TD class="covered"><img alt="coverage" src="../../../img/trans.gif"
                   width="137" height="12"></TD>
            <TD class="uncovered"><img alt="coverage" src="../../../img/trans.gif"
                   width="63" height="12"></TD>
	   	  </TR>
	</TBODY>
      </TABLE>
          </TD>
  </TR> 
</TBODY>
</TABLE>


<TABLE cellspacing="0" cellpadding="0" class="srcView">
<TBODY>

 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">/*</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;2
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment"> * Copyright (c) 2002-2003 by OpenSymphony</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;3
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment"> * All rights reserved.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;4
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment"> */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;5
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">package</span> com.opensymphony.workflow;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;6
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;7
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.module.propertyset.PropertySet;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;8
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.module.propertyset.PropertySetManager;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;9
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;10
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.provider.BeanProvider;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;11
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.provider.bean.DefaultBeanProvider;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;12
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;13
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.util.TextUtils;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;14
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;15
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.config.ConfigLoader;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;16
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.loader.*;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;17
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.query.WorkflowExpressionQuery;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;18
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.query.WorkflowQuery;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;19
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.spi.*;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;20
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.beanshell.BeanShellCondition;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;21
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.beanshell.BeanShellFunctionProvider;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;22
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.beanshell.BeanShellRegister;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;23
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.beanshell.BeanShellValidator;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;24
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.bsf.BSFCondition;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;25
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.bsf.BSFFunctionProvider;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;26
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.bsf.BSFRegister;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;27
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.bsf.BSFValidator;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;28
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.ejb.local.LocalEJBCondition;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;29
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.ejb.local.LocalEJBFunctionProvider;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;30
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.ejb.local.LocalEJBRegister;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;31
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.ejb.local.LocalEJBValidator;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;32
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.ejb.remote.RemoteEJBCondition;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;33
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.ejb.remote.RemoteEJBFunctionProvider;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;34
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.ejb.remote.RemoteEJBRegister;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;35
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.ejb.remote.RemoteEJBValidator;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;36
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.jndi.JNDICondition;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;37
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.jndi.JNDIFunctionProvider;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;38
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.jndi.JNDIRegister;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;39
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> com.opensymphony.workflow.util.jndi.JNDIValidator;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;40
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;41
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> org.apache.commons.logging.Log;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;42
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> org.apache.commons.logging.LogFactory;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;43
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;44
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> java.io.InputStream;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;45
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;46
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> java.net.URL;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;47
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;48
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="keyword">import</span> java.util.*;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;49
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;50
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;51
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;52
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment"> * Abstract workflow instance that serves as the base for specific implementations, such as EJB or SOAP.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;53
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment"> *</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;54
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment"> * <span class="javadoc">@author</span> &lt;a href="mailto:plightbo@hotmail.com"&gt;Pat Lightbody&lt;/a&gt;</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;55
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment"> */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
   <A name="AbstractWorkflow">&nbsp;56</A>
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLineClassStart">
      <PRE class="srcLine">&nbsp;<span class="keyword">public</span> <span class="keyword">class</span> AbstractWorkflow <span class="keyword">implements</span> Workflow {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;57
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">//~ Static fields/initializers /////////////////////////////////////////////</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;58
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;59
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">// statics</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;60
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">static</span> final String CLASS_NAME = <span class="string">"class.name"</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;61
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">static</span> final String EJB_LOCATION = <span class="string">"ejb.location"</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;62
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">static</span> final String JNDI_LOCATION = <span class="string">"jndi.location"</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;63
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">static</span> final String BSF_LANGUAGE = <span class="string">"language"</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;64
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">static</span> final String BSF_SOURCE = <span class="string">"source"</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;65
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">static</span> final String BSF_ROW = <span class="string">"row"</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;66
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">static</span> final String BSF_COL = <span class="string">"col"</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;67
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">static</span> final String BSF_SCRIPT = <span class="string">"script"</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;68
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">static</span> final String BSH_SCRIPT = <span class="string">"script"</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;69
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">private</span> <span class="keyword">static</span> final Log log = LogFactory.getLog(AbstractWorkflow.<span class="keyword">class</span>);</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;70
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">boolean</span> configLoaded = <span class="keyword">false</span>;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;71
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">private</span> <span class="keyword">static</span> BeanProvider beanProvider = <span class="keyword">new</span> DefaultBeanProvider();</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;72
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;73
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">//~ Instance fields ////////////////////////////////////////////////////////</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;74
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;75
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> WorkflowContext context;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;76
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;77
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">//~ Constructors ///////////////////////////////////////////////////////////</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;78
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;79
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 79: method entered 168 times.">&nbsp;168</A>
</TD>

<TD class="srcLine">
   <A title="Line 79: method entered 168 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> AbstractWorkflow() {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;80
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 80: statement executed 168 times.">&nbsp;168</A>
</TD>

<TD class="srcLine">
   <A title="Line 80: statement executed 168 times."><PRE class="srcLine">&nbsp;        <span class="keyword">try</span> {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;81
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 81: statement executed 168 times.">&nbsp;168</A>
</TD>

<TD class="srcLine">
   <A title="Line 81: statement executed 168 times."><PRE class="srcLine">&nbsp;            loadConfig(<span class="keyword">null</span>);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;82
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">catch</span> (FactoryException e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;83
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 83: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 83: statement executed 7 times."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> <span class="keyword">new</span> InternalWorkflowException(<span class="string">"Error loading config"</span>, (e.getRootCause() != <span class="keyword">null</span>) ? e.getRootCause() : e);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;84
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;85
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;86
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;87
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">//~ Methods ////////////////////////////////////////////////////////////////</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;88
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;89
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;90
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;91
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@deprecated</span> use {@link #getAvailableActions(long, Map)}  with an empty Map instead.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;92
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;93
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 93: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 93: method not entered."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">int</span>[] getAvailableActions(<span class="keyword">long</span> id) <span class="keyword">throws</span> WorkflowException {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;94
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 94: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 94: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> getAvailableActions(id, <span class="keyword">new</span> HashMap());</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;95
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;96
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;97
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;98
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * Get the available actions for the specified workflow instance.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;99
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;100
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> id The workflow instance id.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;101
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> inputs The inputs map to pass on to conditions</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;102
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@return</span> An array of action id's that can be performed on the specified entry</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;103
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@throws</span> IllegalArgumentException if the specified id does not exist, or if its workflow</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;104
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * descriptor is no longer available or has become invalid.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;105
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;106
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 106: method entered 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 106: method entered 812 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">int</span>[] getAvailableActions(<span class="keyword">long</span> id, Map inputs) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;107
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 107: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 107: statement executed 812 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;108
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 108: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 108: statement executed 812 times."><PRE class="srcLine">&nbsp;        WorkflowEntry entry = store.findEntry(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;109
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;110
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 110: expression evaluated to true 0 times, false 812 times.">&nbsp;812</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 110: expression evaluated to true 0 times, false 812 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (entry == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;111
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 111: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 111: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No such workflow id "</span> + id);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;112
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;113
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;114
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 114: expression evaluated to true 0 times, false 812 times.">&nbsp;812</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 114: expression evaluated to true 0 times, false 812 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (entry.getState() != WorkflowEntry.ACTIVATED) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;115
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 115: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 115: statement not executed."><PRE class="srcLine">&nbsp;            log.debug(<span class="string">"--&gt; state is "</span> + entry.getState());</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;116
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;117
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 117: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 117: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[0];</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;118
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;119
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;120
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 120: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 120: statement executed 812 times."><PRE class="srcLine">&nbsp;        WorkflowDescriptor wf = getWorkflow(entry.getWorkflowName());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;121
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;122
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 122: expression evaluated to true 0 times, false 812 times.">&nbsp;812</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 122: expression evaluated to true 0 times, false 812 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (wf == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;123
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 123: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 123: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No such workflow "</span> + entry.getWorkflowName());</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;124
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;125
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;126
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 126: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 126: statement executed 812 times."><PRE class="srcLine">&nbsp;        List l = <span class="keyword">new</span> ArrayList();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;127
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 127: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 127: statement executed 812 times."><PRE class="srcLine">&nbsp;        PropertySet ps = store.getPropertySet(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;128
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 128: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 128: statement executed 812 times."><PRE class="srcLine">&nbsp;        Map transientVars = (inputs == <span class="keyword">null</span>) ? <span class="keyword">new</span> HashMap() : <span class="keyword">new</span> HashMap(inputs);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;129
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 129: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 129: statement executed 812 times."><PRE class="srcLine">&nbsp;        Collection currentSteps = store.findCurrentSteps(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;130
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;131
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 131: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 131: statement executed 812 times."><PRE class="srcLine">&nbsp;        populateTransientMap(entry, transientVars, wf.getRegisters(), <span class="keyword">new</span> Integer(0), currentSteps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;132
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;133
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// get global actions</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;134
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 134: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 134: statement executed 812 times."><PRE class="srcLine">&nbsp;        List globalActions = wf.getGlobalActions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;135
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;136
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 136: expression evaluated to true 0 times, false 812 times.">&nbsp;812</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 136: expression evaluated to true 0 times, false 812 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = globalActions.iterator(); iterator.hasNext();) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;137
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 137: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 137: statement not executed."><PRE class="srcLine">&nbsp;            ActionDescriptor action = (ActionDescriptor) iterator.next();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;138
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 138: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 138: statement not executed."><PRE class="srcLine">&nbsp;            RestrictionDescriptor restriction = action.getRestriction();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;139
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 139: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 139: statement not executed."><PRE class="srcLine">&nbsp;            String conditionType = <span class="keyword">null</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;140
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 140: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 140: statement not executed."><PRE class="srcLine">&nbsp;            List conditions = <span class="keyword">null</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;141
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;142
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 142: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 142: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (restriction != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;143
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 143: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 143: statement not executed."><PRE class="srcLine">&nbsp;                conditionType = restriction.getConditionType();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;144
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 144: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 144: statement not executed."><PRE class="srcLine">&nbsp;                conditions = restriction.getConditions();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;145
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;146
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;147
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 147: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 147: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (passesConditions(conditionType, conditions, transientVars, ps)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;148
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 148: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 148: statement not executed."><PRE class="srcLine">&nbsp;                l.add(<span class="keyword">new</span> Integer(action.getId()));</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;149
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;150
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;151
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;152
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// get normal actions</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;153
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 153: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 153: statement executed 812 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = currentSteps.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;154
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 154: statement executed 1078 times.">&nbsp;1078</A>
</TD>

<TD class="srcLine">
   <A title="Line 154: statement executed 1078 times."><PRE class="srcLine">&nbsp;            Step step = (Step) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;155
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 155: statement executed 1078 times.">&nbsp;1078</A>
</TD>

<TD class="srcLine">
   <A title="Line 155: statement executed 1078 times."><PRE class="srcLine">&nbsp;            l.addAll(getAvailableActionsForStep(wf, step, transientVars, ps));</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;156
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;157
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;158
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 158: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 158: statement executed 812 times."><PRE class="srcLine">&nbsp;        <span class="keyword">int</span>[] actions = <span class="keyword">new</span> <span class="keyword">int</span>[l.size()];</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;159
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;160
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 160: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 160: statement executed 812 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; actions.length; i++) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;161
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 161: statement executed 1134 times.">&nbsp;1134</A>
</TD>

<TD class="srcLine">
   <A title="Line 161: statement executed 1134 times."><PRE class="srcLine">&nbsp;            actions[i] = ((Integer) l.get(i)).intValue();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;162
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;163
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;164
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 164: statement executed 812 times.">&nbsp;812</A>
</TD>

<TD class="srcLine">
   <A title="Line 164: statement executed 812 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> actions;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;165
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;166
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;167
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;168
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;169
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;170
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 170: method entered 70 times.">&nbsp;70</A>
</TD>

<TD class="srcLine">
   <A title="Line 170: method entered 70 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> List getCurrentSteps(<span class="keyword">long</span> id) <span class="keyword">throws</span> StoreException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;171
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 171: statement executed 70 times.">&nbsp;70</A>
</TD>

<TD class="srcLine">
   <A title="Line 171: statement executed 70 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;172
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;173
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 173: statement executed 70 times.">&nbsp;70</A>
</TD>

<TD class="srcLine">
   <A title="Line 173: statement executed 70 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> store.findCurrentSteps(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;174
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;175
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;176
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;177
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;178
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;179
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 179: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 179: method not entered."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">int</span> getEntryState(<span class="keyword">long</span> id) <span class="keyword">throws</span> StoreException {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;180
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 180: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 180: statement not executed."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;181
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;182
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 182: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 182: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> store.findEntry(id).getState();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;183
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;184
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;185
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;186
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;187
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;188
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 188: method entered 154 times.">&nbsp;154</A>
</TD>

<TD class="srcLine">
   <A title="Line 188: method entered 154 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> List getHistorySteps(<span class="keyword">long</span> id) <span class="keyword">throws</span> StoreException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;189
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 189: statement executed 154 times.">&nbsp;154</A>
</TD>

<TD class="srcLine">
   <A title="Line 189: statement executed 154 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;190
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;191
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 191: statement executed 154 times.">&nbsp;154</A>
</TD>

<TD class="srcLine">
   <A title="Line 191: statement executed 154 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> store.findHistorySteps(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;192
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;193
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;194
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;195
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;196
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;197
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 197: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 197: method not entered."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> Properties getPersistenceProperties() {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;198
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 198: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 198: statement not executed."><PRE class="srcLine">&nbsp;        Properties p = <span class="keyword">new</span> Properties();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;199
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 199: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 199: statement not executed."><PRE class="srcLine">&nbsp;        Iterator iter = ConfigLoader.persistenceArgs.entrySet().iterator();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;200
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;201
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 201: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 201: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">while</span> (iter.hasNext()) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;202
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 202: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 202: statement not executed."><PRE class="srcLine">&nbsp;            Map.Entry entry = (Map.Entry) iter.next();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;203
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 203: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 203: statement not executed."><PRE class="srcLine">&nbsp;            p.setProperty((String) entry.getKey(), (String) entry.getValue());</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;204
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;205
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;206
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 206: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 206: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> p;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;207
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;208
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;209
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;210
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * Get the PropertySet for the specified workflow ID</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;211
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;212
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> id The workflow ID</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;213
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;214
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 214: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 214: method not entered."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> PropertySet getPropertySet(<span class="keyword">long</span> id) <span class="keyword">throws</span> StoreException {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;215
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 215: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 215: statement not executed."><PRE class="srcLine">&nbsp;        PropertySet ps = getPersistence().getPropertySet(id);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;216
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;217
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 217: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 217: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> ps;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;218
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;219
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;220
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;221
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;222
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;223
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 223: method entered 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 223: method entered 28 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> List getSecurityPermissions(<span class="keyword">long</span> id) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;224
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 224: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 224: statement executed 28 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;225
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 225: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 225: statement executed 28 times."><PRE class="srcLine">&nbsp;        WorkflowEntry entry = store.findEntry(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;226
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 226: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 226: statement executed 28 times."><PRE class="srcLine">&nbsp;        WorkflowDescriptor wf = getWorkflow(entry.getWorkflowName());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;227
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;228
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 228: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 228: statement executed 28 times."><PRE class="srcLine">&nbsp;        PropertySet ps = store.getPropertySet(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;229
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 229: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 229: statement executed 28 times."><PRE class="srcLine">&nbsp;        Map transientVars = <span class="keyword">new</span> HashMap();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;230
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 230: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 230: statement executed 28 times."><PRE class="srcLine">&nbsp;        Collection currentSteps = store.findCurrentSteps(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;231
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 231: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 231: statement executed 28 times."><PRE class="srcLine">&nbsp;        populateTransientMap(entry, transientVars, wf.getRegisters(), <span class="keyword">null</span>, currentSteps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;232
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;233
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 233: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 233: statement executed 28 times."><PRE class="srcLine">&nbsp;        List s = <span class="keyword">new</span> ArrayList();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;234
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;235
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 235: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 235: statement executed 28 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator interator = currentSteps.iterator(); interator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;236
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 236: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 236: statement executed 28 times."><PRE class="srcLine">&nbsp;            Step step = (Step) interator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;237
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;238
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 238: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 238: statement executed 28 times."><PRE class="srcLine">&nbsp;            <span class="keyword">int</span> stepId = step.getStepId();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;239
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;240
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 240: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 240: statement executed 28 times."><PRE class="srcLine">&nbsp;            StepDescriptor xmlStep = wf.getStep(stepId);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;241
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;242
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 242: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 242: statement executed 28 times."><PRE class="srcLine">&nbsp;            List securities = xmlStep.getPermissions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;243
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;244
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 244: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 244: statement executed 28 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (Iterator iterator2 = securities.iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;245
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 245: expression evaluated to true 28 times, false 28 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 245: expression evaluated to true 28 times, false 28 times."><PRE class="srcLine">&nbsp;                    iterator2.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;246
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 246: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 246: statement executed 28 times."><PRE class="srcLine">&nbsp;                PermissionDescriptor security = (PermissionDescriptor) iterator2.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;247
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;248
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                <span class="comment">// to have the permission, the condition must be met or not specified</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;249
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                <span class="comment">// securities can't have restrictions based on inputs, so it's null</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;250
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 250: expression evaluated to true 28 times, false 0 times.">&nbsp;28</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 250: expression evaluated to true 28 times, false 0 times."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> (passesConditions(security.getRestriction().getConditionType(), security.getRestriction().getConditions(), transientVars, ps)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;251
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 251: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 251: statement executed 28 times."><PRE class="srcLine">&nbsp;                    s.add(security.getName());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;252
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;253
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;254
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;255
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;256
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 256: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 256: statement executed 28 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> s;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;257
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;258
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;259
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;260
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;261
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;262
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 262: method entered 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 262: method entered 28 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> WorkflowDescriptor getWorkflowDescriptor(String workflowName) <span class="keyword">throws</span> FactoryException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;263
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 263: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 263: statement executed 28 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> getWorkflow(workflowName);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;264
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;265
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;266
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;267
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;268
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;269
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 269: method entered 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 269: method entered 28 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> String getWorkflowName(<span class="keyword">long</span> id) <span class="keyword">throws</span> StoreException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;270
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 270: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 270: statement executed 28 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;271
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 271: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 271: statement executed 28 times."><PRE class="srcLine">&nbsp;        WorkflowEntry entry = store.findEntry(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;272
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;273
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 273: expression evaluated to true 28 times, false 0 times.">&nbsp;28</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 273: expression evaluated to true 28 times, false 0 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (entry != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;274
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 274: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 274: statement executed 28 times."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> entry.getWorkflowName();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;275
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;276
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 276: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 276: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> <span class="keyword">null</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;277
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;278
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;279
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;280
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;281
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * Get a list of workflow names available</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;282
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;283
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@return</span> String[] an array of workflow names.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;284
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@throws</span> UnsupportedOperationException if the underlying workflow factory cannot obtain a list of workflow names.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;285
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;286
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 286: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 286: method not entered."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> String[] getWorkflowNames() <span class="keyword">throws</span> FactoryException {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;287
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 287: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 287: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> ConfigLoader.getWorkflowNames();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;288
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;289
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;290
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;291
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;292
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;293
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 293: method entered 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 293: method entered 84 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">boolean</span> canInitialize(String workflowName, <span class="keyword">int</span> initialAction) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;294
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 294: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 294: statement executed 84 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> canInitialize(workflowName, initialAction, <span class="keyword">null</span>);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;295
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;296
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;297
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;298
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;299
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> workflowName the name of the workflow to check</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;300
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> initialAction The initial action to check</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;301
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> inputs the inputs map</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;302
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@return</span> true if the workflow can be initialized</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;303
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@throws</span> WorkflowException if an unexpected error happens</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;304
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;305
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 305: method entered 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 305: method entered 84 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">boolean</span> canInitialize(String workflowName, <span class="keyword">int</span> initialAction, Map inputs) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;306
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 306: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 306: statement executed 84 times."><PRE class="srcLine">&nbsp;        final String mockWorkflowName = workflowName;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;307
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 307: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 307: statement executed 84 times."><PRE class="srcLine">&nbsp;        WorkflowEntry mockEntry = <span class="keyword">new</span> WorkflowEntry() {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;308
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 308: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 308: method not entered."><PRE class="srcLine">&nbsp;            <span class="keyword">public</span> <span class="keyword">long</span> getId() {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;309
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 309: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 309: statement not executed."><PRE class="srcLine">&nbsp;                <span class="keyword">return</span> 0;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;310
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;311
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;312
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 312: method entered 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 312: method entered 84 times."><PRE class="srcLine">&nbsp;            <span class="keyword">public</span> String getWorkflowName() {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;313
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 313: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 313: statement executed 84 times."><PRE class="srcLine">&nbsp;                <span class="keyword">return</span> mockWorkflowName;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;314
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;315
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;316
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 316: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 316: method not entered."><PRE class="srcLine">&nbsp;            <span class="keyword">public</span> <span class="keyword">boolean</span> isInitialized() {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;317
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 317: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 317: statement not executed."><PRE class="srcLine">&nbsp;                <span class="keyword">return</span> <span class="keyword">false</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;318
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;319
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;320
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 320: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 320: method not entered."><PRE class="srcLine">&nbsp;            <span class="keyword">public</span> <span class="keyword">int</span> getState() {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;321
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 321: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 321: statement not executed."><PRE class="srcLine">&nbsp;                <span class="keyword">return</span> WorkflowEntry.CREATED;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;322
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;323
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        };</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;324
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;325
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// since no state change happens here, a memory instance is just fine</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;326
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 326: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 326: statement executed 84 times."><PRE class="srcLine">&nbsp;        PropertySet ps = PropertySetManager.getInstance(<span class="string">"memory"</span>, <span class="keyword">null</span>);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;327
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 327: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 327: statement executed 84 times."><PRE class="srcLine">&nbsp;        Map transientVars = <span class="keyword">new</span> HashMap();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;328
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;329
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 329: expression evaluated to true 0 times, false 84 times.">&nbsp;84</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 329: expression evaluated to true 0 times, false 84 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (inputs != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;330
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 330: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 330: statement not executed."><PRE class="srcLine">&nbsp;            transientVars.putAll(inputs);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;331
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;332
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;333
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 333: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 333: statement executed 84 times."><PRE class="srcLine">&nbsp;        populateTransientMap(mockEntry, transientVars, Collections.EMPTY_LIST, <span class="keyword">new</span> Integer(initialAction), Collections.EMPTY_LIST);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;334
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;335
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 335: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 335: statement executed 84 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> canInitialize(workflowName, initialAction, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;336
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;337
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;338
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;339
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;340
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;341
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 341: method entered 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 341: method entered 112 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">boolean</span> canModifyEntryState(<span class="keyword">long</span> id, <span class="keyword">int</span> newState) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;342
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 342: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 342: statement executed 112 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;343
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 343: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 343: statement executed 112 times."><PRE class="srcLine">&nbsp;        WorkflowEntry entry = store.findEntry(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;344
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 344: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 344: statement executed 112 times."><PRE class="srcLine">&nbsp;        <span class="keyword">int</span> currentState = entry.getState();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;345
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 345: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 345: statement executed 112 times."><PRE class="srcLine">&nbsp;        <span class="keyword">boolean</span> result = <span class="keyword">false</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;346
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;347
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 347: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 347: statement executed 112 times."><PRE class="srcLine">&nbsp;        <span class="keyword">switch</span> (newState) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;348
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="keyword">case</span> WorkflowEntry.CREATED:</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;349
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 349: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 349: statement not executed."><PRE class="srcLine">&nbsp;            result = <span class="keyword">false</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;350
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;351
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="keyword">case</span> WorkflowEntry.ACTIVATED:</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;352
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;353
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 353: expression evaluated to true 112 times, false 0 times.">&nbsp;112</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 353: expression evaluated to true 112 times, false 0 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> ((currentState == WorkflowEntry.CREATED) || (currentState == WorkflowEntry.SUSPENDED)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;354
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 354: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 354: statement executed 112 times."><PRE class="srcLine">&nbsp;                result = <span class="keyword">true</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;355
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;356
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;357
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 357: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 357: statement executed 112 times."><PRE class="srcLine">&nbsp;            <span class="keyword">break</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;358
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;359
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="keyword">case</span> WorkflowEntry.SUSPENDED:</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;360
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;361
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 361: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 361: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (currentState == WorkflowEntry.ACTIVATED) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;362
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 362: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 362: statement not executed."><PRE class="srcLine">&nbsp;                result = <span class="keyword">true</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;363
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;364
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;365
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 365: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 365: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">break</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;366
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;367
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="keyword">case</span> WorkflowEntry.KILLED:</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;368
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;369
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 369: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 369: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> ((currentState == WorkflowEntry.CREATED) || (currentState == WorkflowEntry.ACTIVATED) || (currentState == WorkflowEntry.SUSPENDED)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;370
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 370: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 370: statement not executed."><PRE class="srcLine">&nbsp;                result = <span class="keyword">true</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;371
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;372
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;373
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 373: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 373: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">break</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;374
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;375
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="keyword">default</span>:</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;376
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 376: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 376: statement not executed."><PRE class="srcLine">&nbsp;            result = <span class="keyword">false</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;377
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;378
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 378: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 378: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">break</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;379
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;380
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;381
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 381: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 381: statement executed 112 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> result;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;382
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;383
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;384
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 384: method entered 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 384: method entered 112 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">void</span> changeEntryState(<span class="keyword">long</span> id, <span class="keyword">int</span> newState) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;385
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 385: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 385: statement executed 112 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;386
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 386: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 386: statement executed 112 times."><PRE class="srcLine">&nbsp;        WorkflowEntry entry = store.findEntry(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;387
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;388
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 388: expression evaluated to true 112 times, false 0 times.">&nbsp;112</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 388: expression evaluated to true 112 times, false 0 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (canModifyEntryState(id, newState)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;389
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 389: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 389: statement executed 112 times."><PRE class="srcLine">&nbsp;            store.setEntryState(id, newState);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;390
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;391
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 391: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 391: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> <span class="keyword">new</span> InvalidEntryStateException(<span class="string">"Can't transition workflow instance #"</span> + id + <span class="string">". Current state is "</span> + entry.getState() + <span class="string">", requested state is "</span> + newState);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;392
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;393
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;394
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 394: expression evaluated to true 0 times, false 112 times.">&nbsp;112</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 394: expression evaluated to true 0 times, false 112 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (log.isDebugEnabled()) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;395
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 395: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 395: statement not executed."><PRE class="srcLine">&nbsp;            log.debug(entry.getId() + <span class="string">" : State is now : "</span> + entry.getState());</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;396
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;397
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;398
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;399
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 399: method entered 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 399: method entered 266 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">void</span> doAction(<span class="keyword">long</span> id, <span class="keyword">int</span> actionId, Map inputs) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;400
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 400: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 400: statement executed 266 times."><PRE class="srcLine">&nbsp;        <span class="keyword">int</span>[] availableActions = getAvailableActions(id, inputs);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;401
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 401: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 401: statement executed 266 times."><PRE class="srcLine">&nbsp;        <span class="keyword">boolean</span> validAction = <span class="keyword">false</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;402
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;403
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 403: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 403: statement executed 266 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;404
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 404: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 404: statement executed 266 times."><PRE class="srcLine">&nbsp;        WorkflowEntry entry = store.findEntry(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;405
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;406
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 406: expression evaluated to true 0 times, false 266 times.">&nbsp;266</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 406: expression evaluated to true 0 times, false 266 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (entry.getState() != WorkflowEntry.ACTIVATED) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;407
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 407: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 407: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;408
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;409
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;410
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 410: expression evaluated to true 329 times, false 0 times.">&nbsp;329</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 410: expression evaluated to true 329 times, false 0 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; availableActions.length; i++) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;411
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 411: statement executed 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 411: statement executed 329 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (availableActions[i] == actionId) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;412
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 412: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 412: statement executed 266 times."><PRE class="srcLine">&nbsp;                validAction = <span class="keyword">true</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;413
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;414
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 414: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 414: statement executed 266 times."><PRE class="srcLine">&nbsp;                <span class="keyword">break</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;415
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;416
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;417
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;418
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 418: expression evaluated to true 0 times, false 266 times.">&nbsp;266</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 418: expression evaluated to true 0 times, false 266 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (!validAction) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;419
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 419: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 419: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Action "</span> + actionId + <span class="string">" is invalid"</span>);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;420
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;421
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;422
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 422: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 422: statement executed 266 times."><PRE class="srcLine">&nbsp;        WorkflowDescriptor wf = getWorkflow(entry.getWorkflowName());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;423
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;424
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 424: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 424: statement executed 266 times."><PRE class="srcLine">&nbsp;        List currentSteps = store.findCurrentSteps(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;425
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 425: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 425: statement executed 266 times."><PRE class="srcLine">&nbsp;        ActionDescriptor action = wf.getAction(actionId);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;426
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;427
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 427: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 427: statement executed 266 times."><PRE class="srcLine">&nbsp;        PropertySet ps = store.getPropertySet(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;428
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 428: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 428: statement executed 266 times."><PRE class="srcLine">&nbsp;        Map transientVars = <span class="keyword">new</span> HashMap();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;429
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;430
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 430: expression evaluated to true 266 times, false 0 times.">&nbsp;266</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 430: expression evaluated to true 266 times, false 0 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (inputs != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;431
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 431: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 431: statement executed 266 times."><PRE class="srcLine">&nbsp;            transientVars.putAll(inputs);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;432
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;433
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;434
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 434: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 434: statement executed 266 times."><PRE class="srcLine">&nbsp;        populateTransientMap(entry, transientVars, wf.getRegisters(), <span class="keyword">new</span> Integer(actionId), currentSteps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;435
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;436
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 436: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 436: statement executed 266 times."><PRE class="srcLine">&nbsp;        <span class="keyword">try</span> {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;437
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 437: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 437: statement executed 266 times."><PRE class="srcLine">&nbsp;            transitionWorkflow(entry, currentSteps, store, wf, action, transientVars, inputs, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;438
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 438: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 438: statement executed 266 times."><PRE class="srcLine">&nbsp;            completeEntry(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;439
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">catch</span> (WorkflowException e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;440
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 440: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 440: statement not executed."><PRE class="srcLine">&nbsp;            context.setRollbackOnly();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;441
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 441: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 441: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> e;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;442
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;443
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;444
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;445
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 445: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 445: method not entered."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">void</span> executeTriggerFunction(<span class="keyword">long</span> id, <span class="keyword">int</span> triggerId) <span class="keyword">throws</span> WorkflowException {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;446
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 446: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 446: statement not executed."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;447
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 447: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 447: statement not executed."><PRE class="srcLine">&nbsp;        WorkflowEntry entry = store.findEntry(id);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;448
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 448: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 448: statement not executed."><PRE class="srcLine">&nbsp;        WorkflowDescriptor wf = getWorkflow(entry.getWorkflowName());</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;449
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;450
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 450: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 450: statement not executed."><PRE class="srcLine">&nbsp;        PropertySet ps = store.getPropertySet(id);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;451
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 451: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 451: statement not executed."><PRE class="srcLine">&nbsp;        Map transientVars = <span class="keyword">new</span> HashMap();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;452
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 452: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 452: statement not executed."><PRE class="srcLine">&nbsp;        populateTransientMap(entry, transientVars, wf.getRegisters(), <span class="keyword">null</span>, store.findCurrentSteps(id));</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;453
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;454
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 454: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 454: statement not executed."><PRE class="srcLine">&nbsp;        executeFunction(wf.getTriggerFunction(triggerId), transientVars, ps);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;455
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;456
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;457
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 457: method entered 133 times.">&nbsp;133</A>
</TD>

<TD class="srcLine">
   <A title="Line 457: method entered 133 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">long</span> initialize(String workflowName, <span class="keyword">int</span> initialAction, Map inputs) <span class="keyword">throws</span> InvalidRoleException, InvalidInputException, WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;458
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 458: statement executed 133 times.">&nbsp;133</A>
</TD>

<TD class="srcLine">
   <A title="Line 458: statement executed 133 times."><PRE class="srcLine">&nbsp;        WorkflowDescriptor wf = getWorkflow(workflowName);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;459
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;460
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 460: statement executed 133 times.">&nbsp;133</A>
</TD>

<TD class="srcLine">
   <A title="Line 460: statement executed 133 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;461
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 461: statement executed 133 times.">&nbsp;133</A>
</TD>

<TD class="srcLine">
   <A title="Line 461: statement executed 133 times."><PRE class="srcLine">&nbsp;        WorkflowEntry entry = store.createEntry(workflowName);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;462
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;463
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// start with a memory property set, but clone it after we have an ID</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;464
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 464: statement executed 119 times.">&nbsp;119</A>
</TD>

<TD class="srcLine">
   <A title="Line 464: statement executed 119 times."><PRE class="srcLine">&nbsp;        PropertySet ps = store.getPropertySet(entry.getId());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;465
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 465: statement executed 119 times.">&nbsp;119</A>
</TD>

<TD class="srcLine">
   <A title="Line 465: statement executed 119 times."><PRE class="srcLine">&nbsp;        Map transientVars = <span class="keyword">new</span> HashMap();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;466
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;467
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 467: expression evaluated to true 119 times, false 0 times.">&nbsp;119</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 467: expression evaluated to true 119 times, false 0 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (inputs != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;468
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 468: statement executed 119 times.">&nbsp;119</A>
</TD>

<TD class="srcLine">
   <A title="Line 468: statement executed 119 times."><PRE class="srcLine">&nbsp;            transientVars.putAll(inputs);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;469
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;470
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;471
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 471: statement executed 119 times.">&nbsp;119</A>
</TD>

<TD class="srcLine">
   <A title="Line 471: statement executed 119 times."><PRE class="srcLine">&nbsp;        populateTransientMap(entry, transientVars, wf.getRegisters(), <span class="keyword">new</span> Integer(initialAction), Collections.EMPTY_LIST);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;472
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;473
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 473: expression evaluated to true 0 times, false 119 times.">&nbsp;119</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 473: expression evaluated to true 0 times, false 119 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (!canInitialize(workflowName, initialAction, transientVars, ps)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;474
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 474: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 474: statement not executed."><PRE class="srcLine">&nbsp;            context.setRollbackOnly();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;475
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 475: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 475: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> <span class="keyword">new</span> InvalidRoleException(<span class="string">"You are restricted from initializing this workflow"</span>);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;476
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;477
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;478
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 478: statement executed 119 times.">&nbsp;119</A>
</TD>

<TD class="srcLine">
   <A title="Line 478: statement executed 119 times."><PRE class="srcLine">&nbsp;        ActionDescriptor action = wf.getInitialAction(initialAction);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;479
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;480
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 480: statement executed 119 times.">&nbsp;119</A>
</TD>

<TD class="srcLine">
   <A title="Line 480: statement executed 119 times."><PRE class="srcLine">&nbsp;        <span class="keyword">try</span> {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;481
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 481: statement executed 119 times.">&nbsp;119</A>
</TD>

<TD class="srcLine">
   <A title="Line 481: statement executed 119 times."><PRE class="srcLine">&nbsp;            transitionWorkflow(entry, Collections.EMPTY_LIST, store, wf, action, transientVars, inputs, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;482
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">catch</span> (WorkflowException e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;483
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 483: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 483: statement executed 7 times."><PRE class="srcLine">&nbsp;            context.setRollbackOnly();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;484
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 484: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 484: statement executed 7 times."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> e;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;485
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;486
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;487
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 487: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 487: statement executed 112 times."><PRE class="srcLine">&nbsp;        <span class="keyword">long</span> entryId = entry.getId();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;488
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;489
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// now clone the memory PS to the real PS</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;490
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">//PropertySetManager.clone(ps, store.getPropertySet(entryId));</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;491
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 491: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 491: statement executed 112 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> entryId;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;492
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;493
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;494
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;495
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;496
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;497
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 497: method entered 133 times.">&nbsp;133</A>
</TD>

<TD class="srcLine">
   <A title="Line 497: method entered 133 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> List query(WorkflowQuery query) <span class="keyword">throws</span> StoreException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;498
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 498: statement executed 133 times.">&nbsp;133</A>
</TD>

<TD class="srcLine">
   <A title="Line 498: statement executed 133 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> getPersistence().query(query);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;499
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;500
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;501
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;502
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;503
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;504
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 504: method entered 77 times.">&nbsp;77</A>
</TD>

<TD class="srcLine">
   <A title="Line 504: method entered 77 times."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> List query(WorkflowExpressionQuery query) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;505
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 505: statement executed 77 times.">&nbsp;77</A>
</TD>

<TD class="srcLine">
   <A title="Line 505: statement executed 77 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> getPersistence().query(query);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;506
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;507
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;508
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;509
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * @ejb.interface-method</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;510
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;511
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 511: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 511: method not entered."><PRE class="srcLine">&nbsp;    <span class="keyword">public</span> <span class="keyword">boolean</span> saveWorkflowDescriptor(String workflowName, WorkflowDescriptor descriptor, <span class="keyword">boolean</span> replace) <span class="keyword">throws</span> FactoryException {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;512
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 512: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 512: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">boolean</span> success = ConfigLoader.saveWorkflow(workflowName, descriptor, replace);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;513
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;514
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 514: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 514: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> success;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;515
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;516
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;517
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 517: method entered 1176 times.">&nbsp;1176</A>
</TD>

<TD class="srcLine">
   <A title="Line 517: method entered 1176 times."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> List getAvailableActionsForStep(WorkflowDescriptor wf, Step step, Map transientVars, PropertySet ps) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;518
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 518: statement executed 1176 times.">&nbsp;1176</A>
</TD>

<TD class="srcLine">
   <A title="Line 518: statement executed 1176 times."><PRE class="srcLine">&nbsp;        List l = <span class="keyword">new</span> ArrayList();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;519
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 519: statement executed 1176 times.">&nbsp;1176</A>
</TD>

<TD class="srcLine">
   <A title="Line 519: statement executed 1176 times."><PRE class="srcLine">&nbsp;        StepDescriptor s = wf.getStep(step.getStepId());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;520
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;521
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 521: expression evaluated to true 0 times, false 1176 times.">&nbsp;1176</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 521: expression evaluated to true 0 times, false 1176 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (s == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;522
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 522: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 522: statement not executed."><PRE class="srcLine">&nbsp;            log.warn(<span class="string">"getAvailableActionsForStep called for non-existent step Id #"</span> + step.getStepId());</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;523
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;524
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 524: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 524: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> l;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;525
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;526
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;527
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 527: statement executed 1176 times.">&nbsp;1176</A>
</TD>

<TD class="srcLine">
   <A title="Line 527: statement executed 1176 times."><PRE class="srcLine">&nbsp;        List actions = s.getActions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;528
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;529
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 529: expression evaluated to true 0 times, false 1176 times.">&nbsp;1176</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 529: expression evaluated to true 0 times, false 1176 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> ((actions == <span class="keyword">null</span>) || (actions.size() == 0)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;530
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 530: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 530: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> l;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;531
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;532
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;533
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 533: statement executed 1176 times.">&nbsp;1176</A>
</TD>

<TD class="srcLine">
   <A title="Line 533: statement executed 1176 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator2 = actions.iterator(); iterator2.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;534
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 534: statement executed 1554 times.">&nbsp;1554</A>
</TD>

<TD class="srcLine">
   <A title="Line 534: statement executed 1554 times."><PRE class="srcLine">&nbsp;            ActionDescriptor action = (ActionDescriptor) iterator2.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;535
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 535: statement executed 1554 times.">&nbsp;1554</A>
</TD>

<TD class="srcLine">
   <A title="Line 535: statement executed 1554 times."><PRE class="srcLine">&nbsp;            RestrictionDescriptor restriction = action.getRestriction();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;536
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 536: statement executed 1554 times.">&nbsp;1554</A>
</TD>

<TD class="srcLine">
   <A title="Line 536: statement executed 1554 times."><PRE class="srcLine">&nbsp;            String conditionType = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;537
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 537: statement executed 1554 times.">&nbsp;1554</A>
</TD>

<TD class="srcLine">
   <A title="Line 537: statement executed 1554 times."><PRE class="srcLine">&nbsp;            List conditions = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;538
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;539
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 539: statement executed 1554 times.">&nbsp;1554</A>
</TD>

<TD class="srcLine">
   <A title="Line 539: statement executed 1554 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (restriction != <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;540
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 540: statement executed 1491 times.">&nbsp;1491</A>
</TD>

<TD class="srcLine">
   <A title="Line 540: statement executed 1491 times."><PRE class="srcLine">&nbsp;                conditionType = restriction.getConditionType();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;541
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 541: statement executed 1491 times.">&nbsp;1491</A>
</TD>

<TD class="srcLine">
   <A title="Line 541: statement executed 1491 times."><PRE class="srcLine">&nbsp;                conditions = restriction.getConditions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;542
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;543
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;544
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 544: statement executed 1554 times.">&nbsp;1554</A>
</TD>

<TD class="srcLine">
   <A title="Line 544: statement executed 1554 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (passesConditions(conditionType, conditions, Collections.unmodifiableMap(transientVars), ps)) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;545
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 545: statement executed 1232 times.">&nbsp;1232</A>
</TD>

<TD class="srcLine">
   <A title="Line 545: statement executed 1232 times."><PRE class="srcLine">&nbsp;                l.add(<span class="keyword">new</span> Integer(action.getId()));</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;546
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;547
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;548
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;549
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 549: statement executed 1176 times.">&nbsp;1176</A>
</TD>

<TD class="srcLine">
   <A title="Line 549: statement executed 1176 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> l;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;550
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;551
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;552
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 552: method entered 3500 times.">&nbsp;3500</A>
</TD>

<TD class="srcLine">
   <A title="Line 552: method entered 3500 times."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> WorkflowStore getPersistence() <span class="keyword">throws</span> StoreException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;553
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 553: statement executed 3500 times.">&nbsp;3500</A>
</TD>

<TD class="srcLine">
   <A title="Line 553: statement executed 3500 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> StoreFactory.getPersistence(context);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;554
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;555
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;556
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;557
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * Returns a workflow definition object associated with the given name.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;558
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     *</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;559
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> name the name of the workflow</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;560
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@return</span> the object graph that represents a workflow definition</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;561
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;562
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 562: method entered 3045 times.">&nbsp;3045</A>
</TD>

<TD class="srcLine">
   <A title="Line 562: method entered 3045 times."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> <span class="keyword">synchronized</span> WorkflowDescriptor getWorkflow(String name) <span class="keyword">throws</span> FactoryException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;563
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 563: statement executed 3045 times.">&nbsp;3045</A>
</TD>

<TD class="srcLine">
   <A title="Line 563: statement executed 3045 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> ConfigLoader.getWorkflow(name);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;564
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;565
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;566
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 566: method entered 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 566: method entered 266 times."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> <span class="keyword">void</span> completeEntry(<span class="keyword">long</span> id) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;567
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 567: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 567: statement executed 266 times."><PRE class="srcLine">&nbsp;        WorkflowStore store = getPersistence();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;568
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 568: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 568: statement executed 266 times."><PRE class="srcLine">&nbsp;        WorkflowEntry entry = store.findEntry(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;569
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;570
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 570: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 570: statement executed 266 times."><PRE class="srcLine">&nbsp;        WorkflowDescriptor wf = getWorkflow(entry.getWorkflowName());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;571
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;572
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 572: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 572: statement executed 266 times."><PRE class="srcLine">&nbsp;        Collection currentSteps = store.findCurrentSteps(id);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;573
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;574
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 574: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 574: statement executed 266 times."><PRE class="srcLine">&nbsp;        <span class="keyword">boolean</span> isCompleted = <span class="keyword">true</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;575
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;576
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 576: statement executed 266 times.">&nbsp;266</A>
</TD>

<TD class="srcLine">
   <A title="Line 576: statement executed 266 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = currentSteps.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;577
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 577: statement executed 371 times.">&nbsp;371</A>
</TD>

<TD class="srcLine">
   <A title="Line 577: statement executed 371 times."><PRE class="srcLine">&nbsp;            Step step = (Step) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;578
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 578: statement executed 371 times.">&nbsp;371</A>
</TD>

<TD class="srcLine">
   <A title="Line 578: statement executed 371 times."><PRE class="srcLine">&nbsp;            StepDescriptor stepDes = wf.getStep(step.getStepId());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;579
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;580
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// if at least on current step have an available action</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;581
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 581: expression evaluated to true 371 times, false 0 times.">&nbsp;371</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 581: expression evaluated to true 371 times, false 0 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (stepDes.getActions().size() &gt; 0) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;582
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 582: statement executed 371 times.">&nbsp;371</A>
</TD>

<TD class="srcLine">
   <A title="Line 582: statement executed 371 times."><PRE class="srcLine">&nbsp;                isCompleted = <span class="keyword">false</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;583
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;584
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;585
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;586
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 586: expression evaluated to true 0 times, false 266 times.">&nbsp;266</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 586: expression evaluated to true 0 times, false 266 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (isCompleted == <span class="keyword">true</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;587
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 587: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 587: statement not executed."><PRE class="srcLine">&nbsp;            store.setEntryState(id, WorkflowEntry.COMPLETED);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;588
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;589
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;590
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;591
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;592
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * Load the default configuration from the current context classloader. The search order is:</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;593
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * &lt;li&gt;osworkflow.xml&lt;/li&gt;</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;594
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * &lt;li&gt;/osworkflow.xml&lt;/li&gt;</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;595
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * &lt;li&gt;META-INF/osworkflow.xml&lt;/li&gt;</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;596
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * &lt;li&gt;/META-INF/osworkflow.xml&lt;/li&gt;</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;597
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;598
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 598: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 598: method not entered."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> <span class="keyword">void</span> loadConfig() <span class="keyword">throws</span> FactoryException {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;599
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 599: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 599: statement not executed."><PRE class="srcLine">&nbsp;        loadConfig(<span class="keyword">null</span>);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;600
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;601
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;602
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;603
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * Loads the configurtion file &lt;b&gt;osworkflow.xml&lt;/b&gt; from the thread's class loader if no url is specified.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;604
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> url the URL to first attempt to load the configuration file from. If this url is unavailable,</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;605
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * then the default search mechanism is used (as outlined in {@link #loadConfig}).</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;606
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;607
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 607: method not entered.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 607: method not entered."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> <span class="keyword">void</span> loadConfig(URL url) <span class="keyword">throws</span> FactoryException {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;608
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 608: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 608: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (configLoaded) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;609
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 609: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 609: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;610
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;611
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;612
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 612: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 612: statement not executed."><PRE class="srcLine">&nbsp;        InputStream is = <span class="keyword">null</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;613
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;614
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 614: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 614: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (url != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;615
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 615: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 615: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">try</span> {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;616
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 616: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 616: statement not executed."><PRE class="srcLine">&nbsp;                is = url.openStream();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;617
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">catch</span> (Exception ex) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;618
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;619
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;620
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;621
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 621: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 621: statement not executed."><PRE class="srcLine">&nbsp;        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;622
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;623
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 623: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 623: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (is == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;624
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 624: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 624: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">try</span> {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;625
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 625: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 625: statement not executed."><PRE class="srcLine">&nbsp;                is = classLoader.getResourceAsStream(<span class="string">"osworkflow.xml"</span>);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;626
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">catch</span> (Exception e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;627
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;628
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;629
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;630
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 630: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 630: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (is == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;631
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 631: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 631: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">try</span> {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;632
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 632: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 632: statement not executed."><PRE class="srcLine">&nbsp;                is = classLoader.getResourceAsStream(<span class="string">"/osworkflow.xml"</span>);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;633
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">catch</span> (Exception e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;634
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;635
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;636
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;637
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 637: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 637: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (is == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;638
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 638: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 638: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">try</span> {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;639
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 639: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 639: statement not executed."><PRE class="srcLine">&nbsp;                is = classLoader.getResourceAsStream(<span class="string">"META-INF/osworkflow.xml"</span>);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;640
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">catch</span> (Exception e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;641
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;642
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;643
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;644
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 644: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 644: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (is == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;645
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 645: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 645: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">try</span> {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;646
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 646: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 646: statement not executed."><PRE class="srcLine">&nbsp;                is = classLoader.getResourceAsStream(<span class="string">"/META-INF/osworkflow.xml"</span>);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;647
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">catch</span> (Exception e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;648
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;649
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;650
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;651
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 651: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 651: statement not executed."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (is != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;652
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 652: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 652: statement not executed."><PRE class="srcLine">&nbsp;            ConfigLoader.load(is);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;653
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 653: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 653: statement not executed."><PRE class="srcLine">&nbsp;            configLoaded = <span class="keyword">true</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;654
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;655
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;656
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;657
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 657: method entered 4263 times.">&nbsp;4263</A>
</TD>

<TD class="srcLine">
   <A title="Line 657: method entered 4263 times."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> Object loadObject(String clazz) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;658
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 658: statement executed 4263 times.">&nbsp;4263</A>
</TD>

<TD class="srcLine">
   <A title="Line 658: statement executed 4263 times."><PRE class="srcLine">&nbsp;        <span class="keyword">try</span> {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;659
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 659: statement executed 4263 times.">&nbsp;4263</A>
</TD>

<TD class="srcLine">
   <A title="Line 659: statement executed 4263 times."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> Thread.currentThread().getContextClassLoader().loadClass(clazz).newInstance();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;660
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">catch</span> (Exception e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;661
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 661: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 661: statement not executed."><PRE class="srcLine">&nbsp;            log.error(<span class="string">"Could not load object '"</span> + clazz + <span class="string">"'"</span>, e);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;662
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;663
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 663: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 663: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> <span class="keyword">null</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;664
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;665
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;666
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;667
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 667: method entered 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 667: method entered 3010 times."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> <span class="keyword">boolean</span> passesCondition(ConditionDescriptor conditionDesc, Map transientVars, PropertySet ps) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;668
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 668: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 668: statement executed 3010 times."><PRE class="srcLine">&nbsp;        String type = conditionDesc.getType();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;669
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;670
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 670: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 670: statement executed 3010 times."><PRE class="srcLine">&nbsp;        HashMap args = <span class="keyword">new</span> HashMap(conditionDesc.getArgs());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;671
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;672
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 672: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 672: statement executed 3010 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = args.entrySet().iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;673
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 673: expression evaluated to true 5705 times, false 3010 times.">&nbsp;8715</A>
</TD>

<TD class="srcLine">
   <A title="Line 673: expression evaluated to true 5705 times, false 3010 times."><PRE class="srcLine">&nbsp;                iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;674
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 674: statement executed 5705 times.">&nbsp;5705</A>
</TD>

<TD class="srcLine">
   <A title="Line 674: statement executed 5705 times."><PRE class="srcLine">&nbsp;            Map.Entry mapEntry = (Map.Entry) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;675
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 675: statement executed 5705 times.">&nbsp;5705</A>
</TD>

<TD class="srcLine">
   <A title="Line 675: statement executed 5705 times."><PRE class="srcLine">&nbsp;            mapEntry.setValue(translateVariables((String) mapEntry.getValue(), transientVars, ps));</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;676
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;677
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;678
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 678: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 678: statement executed 3010 times."><PRE class="srcLine">&nbsp;        String clazz;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;679
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;680
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 680: expression evaluated to true 0 times, false 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 680: expression evaluated to true 0 times, false 3010 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (<span class="string">"remote-ejb"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;681
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 681: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 681: statement not executed."><PRE class="srcLine">&nbsp;            clazz = RemoteEJBCondition.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;682
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 682: expression evaluated to true 0 times, false 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 682: expression evaluated to true 0 times, false 3010 times."><PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"local-ejb"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;683
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 683: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 683: statement not executed."><PRE class="srcLine">&nbsp;            clazz = LocalEJBCondition.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;684
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 684: expression evaluated to true 0 times, false 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 684: expression evaluated to true 0 times, false 3010 times."><PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"jndi"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;685
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 685: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 685: statement not executed."><PRE class="srcLine">&nbsp;            clazz = JNDICondition.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;686
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 686: expression evaluated to true 0 times, false 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 686: expression evaluated to true 0 times, false 3010 times."><PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"bsf"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;687
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 687: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 687: statement not executed."><PRE class="srcLine">&nbsp;            clazz = BSFCondition.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;688
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 688: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 688: statement executed 3010 times."><PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"beanshell"</span>.equals(type)) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;689
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 689: statement executed 322 times.">&nbsp;322</A>
</TD>

<TD class="srcLine">
   <A title="Line 689: statement executed 322 times."><PRE class="srcLine">&nbsp;            clazz = BeanShellCondition.<span class="keyword">class</span>.getName();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;690
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;691
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 691: statement executed 2688 times.">&nbsp;2688</A>
</TD>

<TD class="srcLine">
   <A title="Line 691: statement executed 2688 times."><PRE class="srcLine">&nbsp;            clazz = (String) args.get(CLASS_NAME);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;692
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;693
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;694
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 694: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 694: statement executed 3010 times."><PRE class="srcLine">&nbsp;        Condition condition = (Condition) loadObject(clazz);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;695
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;696
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 696: expression evaluated to true 0 times, false 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 696: expression evaluated to true 0 times, false 3010 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (condition == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;697
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 697: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 697: statement not executed."><PRE class="srcLine">&nbsp;            String message = <span class="string">"Could not load Condition: "</span> + clazz;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;698
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 698: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 698: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> <span class="keyword">new</span> WorkflowException(message);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;699
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;700
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;701
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 701: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 701: statement executed 3010 times."><PRE class="srcLine">&nbsp;        <span class="keyword">try</span> {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;702
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 702: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 702: statement executed 3010 times."><PRE class="srcLine">&nbsp;            <span class="keyword">boolean</span> passed = condition.passesCondition(transientVars, args, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;703
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;704
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 704: expression evaluated to true 0 times, false 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 704: expression evaluated to true 0 times, false 3010 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (conditionDesc.isNegate()) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;705
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 705: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 705: statement not executed."><PRE class="srcLine">&nbsp;                passed = !passed;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;706
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;707
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;708
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 708: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 708: statement executed 3010 times."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> passed;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;709
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">catch</span> (Exception e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;710
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 710: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 710: statement not executed."><PRE class="srcLine">&nbsp;            String message = <span class="string">"Unknown exception encountered when trying condition: "</span> + clazz;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;711
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 711: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 711: statement not executed."><PRE class="srcLine">&nbsp;            context.setRollbackOnly();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;712
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 712: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 712: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> <span class="keyword">new</span> WorkflowException(message, e);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;713
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;714
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;715
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;716
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 716: method entered 1876 times.">&nbsp;1876</A>
</TD>

<TD class="srcLine">
   <A title="Line 716: method entered 1876 times."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> <span class="keyword">boolean</span> passesConditions(String conditionType, List conditions, Map transientVars, PropertySet ps) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;717
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 717: statement executed 1876 times.">&nbsp;1876</A>
</TD>

<TD class="srcLine">
   <A title="Line 717: statement executed 1876 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> ((conditions == <span class="keyword">null</span>) || (conditions.size() == 0)) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;718
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 718: statement executed 126 times.">&nbsp;126</A>
</TD>

<TD class="srcLine">
   <A title="Line 718: statement executed 126 times."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> <span class="keyword">true</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;719
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;720
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;721
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 721: statement executed 1750 times.">&nbsp;1750</A>
</TD>

<TD class="srcLine">
   <A title="Line 721: statement executed 1750 times."><PRE class="srcLine">&nbsp;        <span class="keyword">boolean</span> and = <span class="string">"AND"</span>.equals(conditionType);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;722
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 722: statement executed 1750 times.">&nbsp;1750</A>
</TD>

<TD class="srcLine">
   <A title="Line 722: statement executed 1750 times."><PRE class="srcLine">&nbsp;        <span class="keyword">boolean</span> or = !and;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;723
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;724
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 724: statement executed 1750 times.">&nbsp;1750</A>
</TD>

<TD class="srcLine">
   <A title="Line 724: statement executed 1750 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = conditions.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;725
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 725: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 725: statement executed 3010 times."><PRE class="srcLine">&nbsp;            ConditionDescriptor conditionDescriptor = (ConditionDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;726
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 726: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 726: statement executed 3010 times."><PRE class="srcLine">&nbsp;            <span class="keyword">boolean</span> result = passesCondition(conditionDescriptor, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;727
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;728
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 728: statement executed 3010 times.">&nbsp;3010</A>
</TD>

<TD class="srcLine">
   <A title="Line 728: statement executed 3010 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (and &amp;&amp; !result) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;729
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 729: statement executed 350 times.">&nbsp;350</A>
</TD>

<TD class="srcLine">
   <A title="Line 729: statement executed 350 times."><PRE class="srcLine">&nbsp;                <span class="keyword">return</span> <span class="keyword">false</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;730
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 730: expression evaluated to true 0 times, false 2660 times.">&nbsp;2660</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 730: expression evaluated to true 0 times, false 2660 times."><PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> <span class="keyword">if</span> (or &amp;&amp; result) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;731
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 731: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 731: statement not executed."><PRE class="srcLine">&nbsp;                <span class="keyword">return</span> <span class="keyword">true</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;732
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;733
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;734
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;735
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 735: expression evaluated to true 1400 times, false 0 times.">&nbsp;1400</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 735: expression evaluated to true 1400 times, false 0 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (and) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;736
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 736: statement executed 1400 times.">&nbsp;1400</A>
</TD>

<TD class="srcLine">
   <A title="Line 736: statement executed 1400 times."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> <span class="keyword">true</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;737
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 737: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 737: statement not executed."><PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> <span class="keyword">if</span> (or) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;738
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 738: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 738: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> <span class="keyword">false</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;739
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;740
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 740: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 740: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> <span class="keyword">false</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;741
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;742
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;743
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;744
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 744: method entered 1309 times.">&nbsp;1309</A>
</TD>

<TD class="srcLine">
   <A title="Line 744: method entered 1309 times."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> <span class="keyword">void</span> populateTransientMap(WorkflowEntry entry, Map transientVars, List registers, Integer actionId, Collection currentSteps) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;745
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 745: statement executed 1309 times.">&nbsp;1309</A>
</TD>

<TD class="srcLine">
   <A title="Line 745: statement executed 1309 times."><PRE class="srcLine">&nbsp;        transientVars.put(<span class="string">"context"</span>, context);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;746
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 746: statement executed 1309 times.">&nbsp;1309</A>
</TD>

<TD class="srcLine">
   <A title="Line 746: statement executed 1309 times."><PRE class="srcLine">&nbsp;        transientVars.put(<span class="string">"entry"</span>, entry);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;747
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 747: statement executed 1309 times.">&nbsp;1309</A>
</TD>

<TD class="srcLine">
   <A title="Line 747: statement executed 1309 times."><PRE class="srcLine">&nbsp;        transientVars.put(<span class="string">"store"</span>, getPersistence());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;748
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 748: statement executed 1309 times.">&nbsp;1309</A>
</TD>

<TD class="srcLine">
   <A title="Line 748: statement executed 1309 times."><PRE class="srcLine">&nbsp;        transientVars.put(<span class="string">"descriptor"</span>, getWorkflow(entry.getWorkflowName()));</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;749
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;750
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 750: statement executed 1309 times.">&nbsp;1309</A>
</TD>

<TD class="srcLine">
   <A title="Line 750: statement executed 1309 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (actionId != <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;751
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 751: statement executed 1281 times.">&nbsp;1281</A>
</TD>

<TD class="srcLine">
   <A title="Line 751: statement executed 1281 times."><PRE class="srcLine">&nbsp;            transientVars.put(<span class="string">"actionId"</span>, actionId);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;752
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;753
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;754
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 754: statement executed 1309 times.">&nbsp;1309</A>
</TD>

<TD class="srcLine">
   <A title="Line 754: statement executed 1309 times."><PRE class="srcLine">&nbsp;        transientVars.put(<span class="string">"currentSteps"</span>, Collections.unmodifiableCollection(currentSteps));</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;755
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;756
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// now talk to the registers for any extra objects needed in scope</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;757
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 757: statement executed 1309 times.">&nbsp;1309</A>
</TD>

<TD class="srcLine">
   <A title="Line 757: statement executed 1309 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = registers.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;758
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 758: statement executed 917 times.">&nbsp;917</A>
</TD>

<TD class="srcLine">
   <A title="Line 758: statement executed 917 times."><PRE class="srcLine">&nbsp;            RegisterDescriptor register = (RegisterDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;759
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 759: statement executed 917 times.">&nbsp;917</A>
</TD>

<TD class="srcLine">
   <A title="Line 759: statement executed 917 times."><PRE class="srcLine">&nbsp;            Map args = register.getArgs();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;760
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;761
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 761: statement executed 917 times.">&nbsp;917</A>
</TD>

<TD class="srcLine">
   <A title="Line 761: statement executed 917 times."><PRE class="srcLine">&nbsp;            String type = register.getType();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;762
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 762: statement executed 917 times.">&nbsp;917</A>
</TD>

<TD class="srcLine">
   <A title="Line 762: statement executed 917 times."><PRE class="srcLine">&nbsp;            String clazz;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;763
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;764
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 764: expression evaluated to true 0 times, false 917 times.">&nbsp;917</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 764: expression evaluated to true 0 times, false 917 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (<span class="string">"remote-ejb"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;765
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 765: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 765: statement not executed."><PRE class="srcLine">&nbsp;                clazz = RemoteEJBRegister.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;766
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 766: expression evaluated to true 0 times, false 917 times.">&nbsp;917</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 766: expression evaluated to true 0 times, false 917 times."><PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"local-ejb"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;767
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 767: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 767: statement not executed."><PRE class="srcLine">&nbsp;                clazz = LocalEJBRegister.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;768
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 768: expression evaluated to true 0 times, false 917 times.">&nbsp;917</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 768: expression evaluated to true 0 times, false 917 times."><PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"jndi"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;769
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 769: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 769: statement not executed."><PRE class="srcLine">&nbsp;                clazz = JNDIRegister.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;770
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 770: expression evaluated to true 0 times, false 917 times.">&nbsp;917</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 770: expression evaluated to true 0 times, false 917 times."><PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"bsf"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;771
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 771: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 771: statement not executed."><PRE class="srcLine">&nbsp;                clazz = BSFRegister.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;772
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 772: expression evaluated to true 0 times, false 917 times.">&nbsp;917</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 772: expression evaluated to true 0 times, false 917 times."><PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"beanshell"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;773
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 773: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 773: statement not executed."><PRE class="srcLine">&nbsp;                clazz = BeanShellRegister.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;774
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;775
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 775: statement executed 917 times.">&nbsp;917</A>
</TD>

<TD class="srcLine">
   <A title="Line 775: statement executed 917 times."><PRE class="srcLine">&nbsp;                clazz = (String) args.get(CLASS_NAME);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;776
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;777
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;778
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 778: statement executed 917 times.">&nbsp;917</A>
</TD>

<TD class="srcLine">
   <A title="Line 778: statement executed 917 times."><PRE class="srcLine">&nbsp;            Register r = (Register) loadObject(clazz);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;779
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;780
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 780: expression evaluated to true 0 times, false 917 times.">&nbsp;917</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 780: expression evaluated to true 0 times, false 917 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (r == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;781
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 781: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 781: statement not executed."><PRE class="srcLine">&nbsp;                String message = <span class="string">"Could not load register class: "</span> + clazz;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;782
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 782: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 782: statement not executed."><PRE class="srcLine">&nbsp;                <span class="keyword">throw</span> <span class="keyword">new</span> WorkflowException(message);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;783
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;784
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;785
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 785: statement executed 917 times.">&nbsp;917</A>
</TD>

<TD class="srcLine">
   <A title="Line 785: statement executed 917 times."><PRE class="srcLine">&nbsp;            <span class="keyword">try</span> {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;786
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 786: statement executed 917 times.">&nbsp;917</A>
</TD>

<TD class="srcLine">
   <A title="Line 786: statement executed 917 times."><PRE class="srcLine">&nbsp;                transientVars.put(register.getVariableName(), r.registerVariable(context, entry, args));</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;787
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">catch</span> (Exception e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;788
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 788: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 788: statement not executed."><PRE class="srcLine">&nbsp;                String message = <span class="string">"An unknown exception occured while registering variable using class: "</span> + clazz;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;789
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 789: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 789: statement not executed."><PRE class="srcLine">&nbsp;                context.setRollbackOnly();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;790
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 790: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 790: statement not executed."><PRE class="srcLine">&nbsp;                <span class="keyword">throw</span> <span class="keyword">new</span> WorkflowException(message, e);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;791
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;792
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;793
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;794
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;795
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;796
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * Validates input against a list of ValidatorDescriptor objects.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;797
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     *</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;798
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> entry the workflow instance</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;799
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> validators the list of ValidatorDescriptors</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;800
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> transientVars the transientVars</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;801
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> ps the persistence variables</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;802
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@throws</span> InvalidInputException if the input is deemed invalid by any validator</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;803
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;804
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 804: method entered 497 times.">&nbsp;497</A>
</TD>

<TD class="srcLine">
   <A title="Line 804: method entered 497 times."><PRE class="srcLine">&nbsp;    <span class="keyword">protected</span> <span class="keyword">void</span> verifyInputs(WorkflowEntry entry, List validators, Map transientVars, PropertySet ps) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;805
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 805: statement executed 497 times.">&nbsp;497</A>
</TD>

<TD class="srcLine">
   <A title="Line 805: statement executed 497 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = validators.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;806
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 806: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 806: statement executed 7 times."><PRE class="srcLine">&nbsp;            ValidatorDescriptor input = (ValidatorDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;807
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;808
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 808: expression evaluated to true 7 times, false 0 times.">&nbsp;7</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 808: expression evaluated to true 7 times, false 0 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (input != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;809
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 809: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 809: statement executed 7 times."><PRE class="srcLine">&nbsp;                String type = input.getType();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;810
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 810: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 810: statement executed 7 times."><PRE class="srcLine">&nbsp;                HashMap args = <span class="keyword">new</span> HashMap(input.getArgs());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;811
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;812
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 812: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 812: statement executed 7 times."><PRE class="srcLine">&nbsp;                <span class="keyword">for</span> (Iterator iterator2 = args.entrySet().iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;813
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 813: expression evaluated to true 7 times, false 7 times.">&nbsp;14</A>
</TD>

<TD class="srcLine">
   <A title="Line 813: expression evaluated to true 7 times, false 7 times."><PRE class="srcLine">&nbsp;                        iterator2.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;814
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 814: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 814: statement executed 7 times."><PRE class="srcLine">&nbsp;                    Map.Entry mapEntry = (Map.Entry) iterator2.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;815
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 815: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 815: statement executed 7 times."><PRE class="srcLine">&nbsp;                    mapEntry.setValue(translateVariables((String) mapEntry.getValue(), transientVars, ps));</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;816
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;817
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;818
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 818: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 818: statement executed 7 times."><PRE class="srcLine">&nbsp;                String clazz;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;819
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;820
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 820: expression evaluated to true 0 times, false 7 times.">&nbsp;7</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 820: expression evaluated to true 0 times, false 7 times."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> (<span class="string">"remote-ejb"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;821
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 821: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 821: statement not executed."><PRE class="srcLine">&nbsp;                    clazz = RemoteEJBValidator.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;822
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 822: expression evaluated to true 0 times, false 7 times.">&nbsp;7</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 822: expression evaluated to true 0 times, false 7 times."><PRE class="srcLine">&nbsp;                } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"local-ejb"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;823
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 823: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 823: statement not executed."><PRE class="srcLine">&nbsp;                    clazz = LocalEJBValidator.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;824
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 824: expression evaluated to true 0 times, false 7 times.">&nbsp;7</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 824: expression evaluated to true 0 times, false 7 times."><PRE class="srcLine">&nbsp;                } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"jndi"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;825
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 825: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 825: statement not executed."><PRE class="srcLine">&nbsp;                    clazz = JNDIValidator.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;826
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 826: expression evaluated to true 0 times, false 7 times.">&nbsp;7</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 826: expression evaluated to true 0 times, false 7 times."><PRE class="srcLine">&nbsp;                } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"bsf"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;827
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 827: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 827: statement not executed."><PRE class="srcLine">&nbsp;                    clazz = BSFValidator.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;828
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 828: expression evaluated to true 7 times, false 0 times.">&nbsp;7</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 828: expression evaluated to true 7 times, false 0 times."><PRE class="srcLine">&nbsp;                } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"beanshell"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;829
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 829: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 829: statement executed 7 times."><PRE class="srcLine">&nbsp;                    clazz = BeanShellValidator.<span class="keyword">class</span>.getName();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;830
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;831
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 831: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 831: statement not executed."><PRE class="srcLine">&nbsp;                    clazz = (String) args.get(CLASS_NAME);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;832
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;833
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;834
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 834: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 834: statement executed 7 times."><PRE class="srcLine">&nbsp;                Validator validator = (Validator) loadObject(clazz);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;835
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;836
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 836: expression evaluated to true 0 times, false 7 times.">&nbsp;7</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 836: expression evaluated to true 0 times, false 7 times."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> (validator == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;837
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 837: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 837: statement not executed."><PRE class="srcLine">&nbsp;                    String message = <span class="string">"Could not load validator class: "</span> + clazz;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;838
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 838: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 838: statement not executed."><PRE class="srcLine">&nbsp;                    <span class="keyword">throw</span> <span class="keyword">new</span> WorkflowException(message);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;839
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;840
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;841
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 841: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 841: statement executed 7 times."><PRE class="srcLine">&nbsp;                <span class="keyword">try</span> {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;842
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 842: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 842: statement executed 7 times."><PRE class="srcLine">&nbsp;                    validator.validate(transientVars, args, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;843
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                } <span class="keyword">catch</span> (InvalidInputException e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;844
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 844: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 844: statement executed 7 times."><PRE class="srcLine">&nbsp;                    <span class="keyword">throw</span> e;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;845
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                } <span class="keyword">catch</span> (Exception e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;846
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 846: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 846: statement not executed."><PRE class="srcLine">&nbsp;                    String message = <span class="string">"An unknown exception occured executing Validator: "</span> + clazz;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;847
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 847: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 847: statement not executed."><PRE class="srcLine">&nbsp;                    context.setRollbackOnly();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;848
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 848: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 848: statement not executed."><PRE class="srcLine">&nbsp;                    <span class="keyword">throw</span> <span class="keyword">new</span> WorkflowException(message, e);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;849
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;850
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;851
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;852
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;853
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;854
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 854: method entered 182 times.">&nbsp;182</A>
</TD>

<TD class="srcLine">
   <A title="Line 854: method entered 182 times."><PRE class="srcLine">&nbsp;    Object getVariableFromMaps(String var, Map transientVars, PropertySet ps) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;855
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 855: statement executed 182 times.">&nbsp;182</A>
</TD>

<TD class="srcLine">
   <A title="Line 855: statement executed 182 times."><PRE class="srcLine">&nbsp;        <span class="keyword">int</span> firstDot = var.indexOf('.');</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;856
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 856: statement executed 182 times.">&nbsp;182</A>
</TD>

<TD class="srcLine">
   <A title="Line 856: statement executed 182 times."><PRE class="srcLine">&nbsp;        String actualVar = var;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;857
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;858
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 858: expression evaluated to true 0 times, false 182 times.">&nbsp;182</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 858: expression evaluated to true 0 times, false 182 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (firstDot != -1) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;859
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 859: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 859: statement not executed."><PRE class="srcLine">&nbsp;            actualVar = var.substring(0, firstDot);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;860
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;861
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;862
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 862: statement executed 182 times.">&nbsp;182</A>
</TD>

<TD class="srcLine">
   <A title="Line 862: statement executed 182 times."><PRE class="srcLine">&nbsp;        Object o = transientVars.get(actualVar);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;863
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;864
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 864: statement executed 182 times.">&nbsp;182</A>
</TD>

<TD class="srcLine">
   <A title="Line 864: statement executed 182 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (o == <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;865
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 865: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 865: statement executed 7 times."><PRE class="srcLine">&nbsp;            o = ps.getAsActualType(actualVar);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;866
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;867
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;868
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 868: expression evaluated to true 0 times, false 182 times.">&nbsp;182</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 868: expression evaluated to true 0 times, false 182 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (firstDot != -1) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;869
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 869: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 869: statement not executed."><PRE class="srcLine">&nbsp;            o = beanProvider.getProperty(o, var.substring(firstDot + 1));</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;870
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;871
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;872
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 872: statement executed 182 times.">&nbsp;182</A>
</TD>

<TD class="srcLine">
   <A title="Line 872: statement executed 182 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> o;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;873
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;874
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;875
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;876
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * Parses a string for instances of "${foo}" and returns a string with all instances replaced</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;877
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * with the string value of the foo object (&lt;b&gt;foo.toString()&lt;/b&gt;). If the string being passed</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;878
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * in only refers to a single variable and contains no other characters (for example: ${foo}),</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;879
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * then the actual object is returned instead of converting it to a string.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;880
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;881
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 881: method entered 7189 times.">&nbsp;7189</A>
</TD>

<TD class="srcLine">
   <A title="Line 881: method entered 7189 times."><PRE class="srcLine">&nbsp;    Object translateVariables(String s, Map transientVars, PropertySet ps) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;882
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 882: statement executed 7189 times.">&nbsp;7189</A>
</TD>

<TD class="srcLine">
   <A title="Line 882: statement executed 7189 times."><PRE class="srcLine">&nbsp;        String temp = s.trim();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;883
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;884
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 884: statement executed 7189 times.">&nbsp;7189</A>
</TD>

<TD class="srcLine">
   <A title="Line 884: statement executed 7189 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (temp.startsWith(<span class="string">"${"</span>) &amp;&amp; temp.endsWith(<span class="string">"}"</span>) &amp;&amp; (temp.indexOf('$', 1) == -1)) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;885
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// the string is just a variable reference, don't convert it to a string</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;886
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 886: statement executed 182 times.">&nbsp;182</A>
</TD>

<TD class="srcLine">
   <A title="Line 886: statement executed 182 times."><PRE class="srcLine">&nbsp;            String var = temp.substring(2, temp.length() - 1);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;887
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;888
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 888: statement executed 182 times.">&nbsp;182</A>
</TD>

<TD class="srcLine">
   <A title="Line 888: statement executed 182 times."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> getVariableFromMaps(var, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;889
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;890
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// the string passed in contains multiple variables (or none!) and should be treated as a string</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;891
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 891: statement executed 7007 times.">&nbsp;7007</A>
</TD>

<TD class="srcLine">
   <A title="Line 891: statement executed 7007 times."><PRE class="srcLine">&nbsp;            <span class="keyword">while</span> (<span class="keyword">true</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;892
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 892: statement executed 7007 times.">&nbsp;7007</A>
</TD>

<TD class="srcLine">
   <A title="Line 892: statement executed 7007 times."><PRE class="srcLine">&nbsp;                <span class="keyword">int</span> x = s.indexOf(<span class="string">"${"</span>);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;893
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 893: statement executed 7007 times.">&nbsp;7007</A>
</TD>

<TD class="srcLine">
   <A title="Line 893: statement executed 7007 times."><PRE class="srcLine">&nbsp;                <span class="keyword">int</span> y = s.indexOf(<span class="string">"}"</span>, x);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;894
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;895
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 895: expression evaluated to true 0 times, false 7007 times.">&nbsp;7007</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 895: expression evaluated to true 0 times, false 7007 times."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> ((x != -1) &amp;&amp; (y != -1)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;896
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 896: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 896: statement not executed."><PRE class="srcLine">&nbsp;                    String var = s.substring(x + 2, y);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;897
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 897: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 897: statement not executed."><PRE class="srcLine">&nbsp;                    String t = <span class="keyword">null</span>;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;898
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 898: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 898: statement not executed."><PRE class="srcLine">&nbsp;                    Object o = getVariableFromMaps(var, transientVars, ps);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;899
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;900
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 900: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 900: statement not executed."><PRE class="srcLine">&nbsp;                    <span class="keyword">if</span> (o != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;901
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 901: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 901: statement not executed."><PRE class="srcLine">&nbsp;                        t = o.toString();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;902
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;903
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;904
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 904: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 904: statement not executed."><PRE class="srcLine">&nbsp;                    <span class="keyword">if</span> (t != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;905
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 905: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 905: statement not executed."><PRE class="srcLine">&nbsp;                        s = s.substring(0, x) + t + s.substring(y + 1);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;906
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                    } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;907
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                        <span class="comment">// the variable doesn't exist, so don't display anything</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;908
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 908: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 908: statement not executed."><PRE class="srcLine">&nbsp;                        s = s.substring(0, x) + s.substring(y + 1);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;909
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;910
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;911
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 911: statement executed 7007 times.">&nbsp;7007</A>
</TD>

<TD class="srcLine">
   <A title="Line 911: statement executed 7007 times."><PRE class="srcLine">&nbsp;                    <span class="keyword">break</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;912
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;913
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;914
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;915
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 915: statement executed 7007 times.">&nbsp;7007</A>
</TD>

<TD class="srcLine">
   <A title="Line 915: statement executed 7007 times."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> s;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;916
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;917
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;918
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;919
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 919: method entered 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 919: method entered 385 times."><PRE class="srcLine">&nbsp;    <span class="keyword">private</span> Step getCurrentStep(WorkflowDescriptor wfDesc, <span class="keyword">int</span> actionId, List currentSteps, Map transientVars, PropertySet ps) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;920
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 920: statement executed 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 920: statement executed 385 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (currentSteps.size() == 1) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;921
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 921: statement executed 168 times.">&nbsp;168</A>
</TD>

<TD class="srcLine">
   <A title="Line 921: statement executed 168 times."><PRE class="srcLine">&nbsp;            <span class="keyword">return</span> (Step) currentSteps.get(0);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;922
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;923
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;924
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 924: statement executed 217 times.">&nbsp;217</A>
</TD>

<TD class="srcLine">
   <A title="Line 924: statement executed 217 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = currentSteps.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;925
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 925: statement executed 133 times.">&nbsp;133</A>
</TD>

<TD class="srcLine">
   <A title="Line 925: statement executed 133 times."><PRE class="srcLine">&nbsp;            Step step = (Step) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;926
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 926: statement executed 133 times.">&nbsp;133</A>
</TD>

<TD class="srcLine">
   <A title="Line 926: statement executed 133 times."><PRE class="srcLine">&nbsp;            ActionDescriptor action = wfDesc.getStep(step.getStepId()).getAction(actionId);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;927
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;928
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 928: statement executed 133 times.">&nbsp;133</A>
</TD>

<TD class="srcLine">
   <A title="Line 928: statement executed 133 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (action != <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;929
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 929: statement executed 98 times.">&nbsp;98</A>
</TD>

<TD class="srcLine">
   <A title="Line 929: statement executed 98 times."><PRE class="srcLine">&nbsp;                List availActions = getAvailableActionsForStep(wfDesc, step, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;930
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;931
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 931: expression evaluated to true 98 times, false 0 times.">&nbsp;98</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 931: expression evaluated to true 98 times, false 0 times."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> (availActions.contains(<span class="keyword">new</span> Integer(action.getId()))) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;932
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 932: statement executed 98 times.">&nbsp;98</A>
</TD>

<TD class="srcLine">
   <A title="Line 932: statement executed 98 times."><PRE class="srcLine">&nbsp;                    <span class="keyword">return</span> step;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;933
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;934
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;935
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;936
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;937
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 937: statement executed 119 times.">&nbsp;119</A>
</TD>

<TD class="srcLine">
   <A title="Line 937: statement executed 119 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;938
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;939
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;940
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 940: method entered 203 times.">&nbsp;203</A>
</TD>

<TD class="srcLine">
   <A title="Line 940: method entered 203 times."><PRE class="srcLine">&nbsp;    <span class="keyword">private</span> <span class="keyword">boolean</span> canInitialize(String workflowName, <span class="keyword">int</span> initialAction, Map transientVars, PropertySet ps) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;941
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 941: statement executed 203 times.">&nbsp;203</A>
</TD>

<TD class="srcLine">
   <A title="Line 941: statement executed 203 times."><PRE class="srcLine">&nbsp;        WorkflowDescriptor wf = getWorkflow(workflowName);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;942
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;943
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 943: statement executed 203 times.">&nbsp;203</A>
</TD>

<TD class="srcLine">
   <A title="Line 943: statement executed 203 times."><PRE class="srcLine">&nbsp;        ActionDescriptor actionDescriptor = wf.getInitialAction(initialAction);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;944
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;945
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 945: expression evaluated to true 0 times, false 203 times.">&nbsp;203</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 945: expression evaluated to true 0 times, false 203 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (actionDescriptor == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;946
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 946: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 946: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> <span class="keyword">new</span> WorkflowException(<span class="string">"Invalid Initial Action"</span>);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;947
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;948
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;949
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 949: statement executed 203 times.">&nbsp;203</A>
</TD>

<TD class="srcLine">
   <A title="Line 949: statement executed 203 times."><PRE class="srcLine">&nbsp;        RestrictionDescriptor restriction = actionDescriptor.getRestriction();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;950
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 950: statement executed 203 times.">&nbsp;203</A>
</TD>

<TD class="srcLine">
   <A title="Line 950: statement executed 203 times."><PRE class="srcLine">&nbsp;        String conditionType = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;951
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 951: statement executed 203 times.">&nbsp;203</A>
</TD>

<TD class="srcLine">
   <A title="Line 951: statement executed 203 times."><PRE class="srcLine">&nbsp;        List conditions = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;952
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;953
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 953: statement executed 203 times.">&nbsp;203</A>
</TD>

<TD class="srcLine">
   <A title="Line 953: statement executed 203 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (restriction != <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;954
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 954: statement executed 154 times.">&nbsp;154</A>
</TD>

<TD class="srcLine">
   <A title="Line 954: statement executed 154 times."><PRE class="srcLine">&nbsp;            conditionType = restriction.getConditionType();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;955
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 955: statement executed 154 times.">&nbsp;154</A>
</TD>

<TD class="srcLine">
   <A title="Line 955: statement executed 154 times."><PRE class="srcLine">&nbsp;            conditions = restriction.getConditions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;956
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;957
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;958
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 958: statement executed 203 times.">&nbsp;203</A>
</TD>

<TD class="srcLine">
   <A title="Line 958: statement executed 203 times."><PRE class="srcLine">&nbsp;        <span class="keyword">return</span> passesConditions(conditionType, conditions, Collections.unmodifiableMap(transientVars), ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;959
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;960
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;961
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 961: method entered 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 961: method entered 392 times."><PRE class="srcLine">&nbsp;    <span class="keyword">private</span> <span class="keyword">void</span> createNewCurrentStep(ResultDescriptor theResult, WorkflowEntry entry, WorkflowStore store, <span class="keyword">int</span> actionId, Step currentStep, <span class="keyword">long</span>[] previousIds, Map transientVars, PropertySet ps) <span class="keyword">throws</span> StoreException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;962
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 962: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 962: statement executed 392 times."><PRE class="srcLine">&nbsp;        <span class="keyword">try</span> {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;963
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 963: expression evaluated to true 0 times, false 392 times.">&nbsp;392</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 963: expression evaluated to true 0 times, false 392 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (log.isDebugEnabled()) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;964
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 964: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 964: statement not executed."><PRE class="srcLine">&nbsp;                log.debug(<span class="string">"Outcome: stepId="</span> + theResult.getStep() + <span class="string">", status="</span> + theResult.getStatus() + <span class="string">", owner="</span> + theResult.getOwner() + <span class="string">", actionId="</span> + actionId + <span class="string">", currentStep="</span> + ((currentStep != <span class="keyword">null</span>) ? currentStep.getStepId() : 0));</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;965
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;966
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;967
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 967: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 967: statement executed 392 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (previousIds == <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;968
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 968: statement executed 119 times.">&nbsp;119</A>
</TD>

<TD class="srcLine">
   <A title="Line 968: statement executed 119 times."><PRE class="srcLine">&nbsp;                previousIds = <span class="keyword">new</span> <span class="keyword">long</span>[0];</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;969
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;970
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;971
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 971: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 971: statement executed 392 times."><PRE class="srcLine">&nbsp;            String owner = TextUtils.noNull(theResult.getOwner());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;972
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;973
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 973: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 973: statement executed 392 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (owner.equals(<span class="string">""</span>)) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;974
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 974: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 974: statement executed 84 times."><PRE class="srcLine">&nbsp;                owner = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;975
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;976
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 976: statement executed 308 times.">&nbsp;308</A>
</TD>

<TD class="srcLine">
   <A title="Line 976: statement executed 308 times."><PRE class="srcLine">&nbsp;                Object o = translateVariables(owner, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;977
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 977: statement executed 308 times.">&nbsp;308</A>
</TD>

<TD class="srcLine">
   <A title="Line 977: statement executed 308 times."><PRE class="srcLine">&nbsp;                owner = (o != <span class="keyword">null</span>) ? o.toString() : <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;978
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;979
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;980
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 980: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 980: statement executed 392 times."><PRE class="srcLine">&nbsp;            String oldStatus = theResult.getOldStatus();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;981
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 981: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 981: statement executed 392 times."><PRE class="srcLine">&nbsp;            oldStatus = translateVariables(oldStatus, transientVars, ps).toString();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;982
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;983
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 983: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 983: statement executed 392 times."><PRE class="srcLine">&nbsp;            String status = theResult.getStatus();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;984
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 984: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 984: statement executed 392 times."><PRE class="srcLine">&nbsp;            status = translateVariables(status, transientVars, ps).toString();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;985
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;986
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 986: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 986: statement executed 392 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (currentStep != <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;987
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 987: statement executed 238 times.">&nbsp;238</A>
</TD>

<TD class="srcLine">
   <A title="Line 987: statement executed 238 times."><PRE class="srcLine">&nbsp;                store.markFinished(currentStep, actionId, <span class="keyword">new</span> Date(), oldStatus, context.getCaller());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;988
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 988: statement executed 238 times.">&nbsp;238</A>
</TD>

<TD class="srcLine">
   <A title="Line 988: statement executed 238 times."><PRE class="srcLine">&nbsp;                store.moveToHistory(currentStep);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;989
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;990
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                <span class="comment">//store.moveToHistory(actionId, new Date(), currentStep, oldStatus, context.getCaller());</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;991
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;992
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;993
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// construct the start date and optional due date</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;994
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 994: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 994: statement executed 392 times."><PRE class="srcLine">&nbsp;            Date startDate = <span class="keyword">new</span> Date();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;995
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 995: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 995: statement executed 392 times."><PRE class="srcLine">&nbsp;            Date dueDate = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;996
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;997
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 997: expression evaluated to true 0 times, false 392 times.">&nbsp;392</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 997: expression evaluated to true 0 times, false 392 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> ((theResult.getDueDate() != <span class="keyword">null</span>) &amp;&amp; (theResult.getDueDate().length() &gt; 0)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;998
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 998: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 998: statement not executed."><PRE class="srcLine">&nbsp;                Object dueDateObject = translateVariables(theResult.getDueDate(), transientVars, ps);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;999
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1000
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1000: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1000: statement not executed."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> (dueDateObject <span class="keyword">instanceof</span> Date) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1001
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1001: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1001: statement not executed."><PRE class="srcLine">&nbsp;                    dueDate = (Date) dueDateObject;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1002
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1002: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1002: statement not executed."><PRE class="srcLine">&nbsp;                } <span class="keyword">else</span> <span class="keyword">if</span> (dueDateObject <span class="keyword">instanceof</span> String) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1003
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1003: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1003: statement not executed."><PRE class="srcLine">&nbsp;                    <span class="keyword">long</span> offset = TextUtils.parseLong((String) dueDateObject);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1004
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1005
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1005: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1005: statement not executed."><PRE class="srcLine">&nbsp;                    <span class="keyword">if</span> (offset &gt; 0) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1006
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1006: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1006: statement not executed."><PRE class="srcLine">&nbsp;                        dueDate = <span class="keyword">new</span> Date(startDate.getTime() + offset);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1007
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1008
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1008: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1008: statement not executed."><PRE class="srcLine">&nbsp;                } <span class="keyword">else</span> <span class="keyword">if</span> (dueDateObject <span class="keyword">instanceof</span> Number) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1009
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1009: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1009: statement not executed."><PRE class="srcLine">&nbsp;                    Number num = (Number) dueDateObject;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1010
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1010: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1010: statement not executed."><PRE class="srcLine">&nbsp;                    <span class="keyword">long</span> offset = num.longValue();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1011
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1012
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1012: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1012: statement not executed."><PRE class="srcLine">&nbsp;                    <span class="keyword">if</span> (offset &gt; 0) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1013
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1013: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1013: statement not executed."><PRE class="srcLine">&nbsp;                        dueDate = <span class="keyword">new</span> Date(startDate.getTime() + offset);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1014
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1015
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1016
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1017
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1018
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1018: statement executed 392 times.">&nbsp;392</A>
</TD>

<TD class="srcLine">
   <A title="Line 1018: statement executed 392 times."><PRE class="srcLine">&nbsp;            store.createCurrentStep(entry.getId(), theResult.getStep(), owner, startDate, dueDate, status, previousIds);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1019
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">catch</span> (StoreException e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1020
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1020: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1020: statement not executed."><PRE class="srcLine">&nbsp;            context.setRollbackOnly();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1021
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1021: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1021: statement not executed."><PRE class="srcLine">&nbsp;            <span class="keyword">throw</span> e;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1022
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1023
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1024
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1025
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    <span class="comment">/**</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1026
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * Executes a function.</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1027
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     *</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1028
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> function the function to execute</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1029
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> transientVars the transientVars given by the end-user</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1030
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     * <span class="javadoc">@param</span> ps the persistence variables</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1031
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;<span class="comment">     */</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1032
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1032: method entered 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 1032: method entered 329 times."><PRE class="srcLine">&nbsp;    <span class="keyword">private</span> <span class="keyword">void</span> executeFunction(FunctionDescriptor function, Map transientVars, PropertySet ps) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1033
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1033: expression evaluated to true 329 times, false 0 times.">&nbsp;329</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1033: expression evaluated to true 329 times, false 0 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (function != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1034
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1034: statement executed 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 1034: statement executed 329 times."><PRE class="srcLine">&nbsp;            String type = function.getType();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1035
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1036
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1036: statement executed 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 1036: statement executed 329 times."><PRE class="srcLine">&nbsp;            HashMap args = <span class="keyword">new</span> HashMap(function.getArgs());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1037
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1038
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1038: statement executed 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 1038: statement executed 329 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (Iterator iterator = args.entrySet().iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1039
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1039: expression evaluated to true 385 times, false 329 times.">&nbsp;714</A>
</TD>

<TD class="srcLine">
   <A title="Line 1039: expression evaluated to true 385 times, false 329 times."><PRE class="srcLine">&nbsp;                    iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1040
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1040: statement executed 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 1040: statement executed 385 times."><PRE class="srcLine">&nbsp;                Map.Entry mapEntry = (Map.Entry) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1041
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1041: statement executed 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 1041: statement executed 385 times."><PRE class="srcLine">&nbsp;                mapEntry.setValue(translateVariables((String) mapEntry.getValue(), transientVars, ps));</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1042
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1043
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1044
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1044: statement executed 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 1044: statement executed 329 times."><PRE class="srcLine">&nbsp;            String clazz;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1045
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1046
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1046: expression evaluated to true 0 times, false 329 times.">&nbsp;329</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1046: expression evaluated to true 0 times, false 329 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (<span class="string">"remote-ejb"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1047
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1047: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1047: statement not executed."><PRE class="srcLine">&nbsp;                clazz = RemoteEJBFunctionProvider.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1048
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1048: expression evaluated to true 0 times, false 329 times.">&nbsp;329</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1048: expression evaluated to true 0 times, false 329 times."><PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"local-ejb"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1049
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1049: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1049: statement not executed."><PRE class="srcLine">&nbsp;                clazz = LocalEJBFunctionProvider.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1050
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1050: expression evaluated to true 0 times, false 329 times.">&nbsp;329</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1050: expression evaluated to true 0 times, false 329 times."><PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"jndi"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1051
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1051: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1051: statement not executed."><PRE class="srcLine">&nbsp;                clazz = JNDIFunctionProvider.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1052
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1052: expression evaluated to true 0 times, false 329 times.">&nbsp;329</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1052: expression evaluated to true 0 times, false 329 times."><PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"bsf"</span>.equals(type)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1053
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1053: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1053: statement not executed."><PRE class="srcLine">&nbsp;                clazz = BSFFunctionProvider.<span class="keyword">class</span>.getName();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1054
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1054: statement executed 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 1054: statement executed 329 times."><PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"beanshell"</span>.equals(type)) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1055
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1055: statement executed 154 times.">&nbsp;154</A>
</TD>

<TD class="srcLine">
   <A title="Line 1055: statement executed 154 times."><PRE class="srcLine">&nbsp;                clazz = BeanShellFunctionProvider.<span class="keyword">class</span>.getName();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1056
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1057
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1057: statement executed 175 times.">&nbsp;175</A>
</TD>

<TD class="srcLine">
   <A title="Line 1057: statement executed 175 times."><PRE class="srcLine">&nbsp;                clazz = (String) args.get(CLASS_NAME);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1058
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1059
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1060
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1060: statement executed 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 1060: statement executed 329 times."><PRE class="srcLine">&nbsp;            FunctionProvider provider = (FunctionProvider) loadObject(clazz);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1061
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1062
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1062: expression evaluated to true 0 times, false 329 times.">&nbsp;329</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1062: expression evaluated to true 0 times, false 329 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (provider == <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1063
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1063: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1063: statement not executed."><PRE class="srcLine">&nbsp;                String message = <span class="string">"Could not load FunctionProvider class: "</span> + clazz;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1064
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1064: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1064: statement not executed."><PRE class="srcLine">&nbsp;                context.setRollbackOnly();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1065
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1065: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1065: statement not executed."><PRE class="srcLine">&nbsp;                <span class="keyword">throw</span> <span class="keyword">new</span> WorkflowException(message);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1066
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1067
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1068
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1068: statement executed 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 1068: statement executed 329 times."><PRE class="srcLine">&nbsp;            <span class="keyword">try</span> {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1069
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1069: statement executed 329 times.">&nbsp;329</A>
</TD>

<TD class="srcLine">
   <A title="Line 1069: statement executed 329 times."><PRE class="srcLine">&nbsp;                provider.execute(transientVars, args, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1070
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            } <span class="keyword">catch</span> (WorkflowException e) {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1071
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1071: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1071: statement not executed."><PRE class="srcLine">&nbsp;                context.setRollbackOnly();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1072
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1072: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1072: statement not executed."><PRE class="srcLine">&nbsp;                <span class="keyword">throw</span> e;</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1073
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1074
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1075
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1076
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1077
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1077: method entered 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 1077: method entered 385 times."><PRE class="srcLine">&nbsp;    <span class="keyword">private</span> <span class="keyword">void</span> transitionWorkflow(WorkflowEntry entry, List currentSteps, WorkflowStore store, WorkflowDescriptor wf, ActionDescriptor action, Map transientVars, Map inputs, PropertySet ps) <span class="keyword">throws</span> WorkflowException {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1078
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1078: statement executed 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 1078: statement executed 385 times."><PRE class="srcLine">&nbsp;        Step step = getCurrentStep(wf, action.getId(), currentSteps, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1079
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1080
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// validate transientVars (optional)</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1081
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1081: statement executed 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 1081: statement executed 385 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (action.getValidators().size() &gt; 0) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1082
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1082: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 1082: statement executed 7 times."><PRE class="srcLine">&nbsp;            verifyInputs(entry, action.getValidators(), Collections.unmodifiableMap(transientVars), ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1083
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1084
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1085
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// preFunctions</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1086
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1086: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1086: statement executed 378 times."><PRE class="srcLine">&nbsp;        List preFunctions = action.getPreFunctions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1087
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1088
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1088: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1088: statement executed 378 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = preFunctions.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1089
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1089: statement executed 245 times.">&nbsp;245</A>
</TD>

<TD class="srcLine">
   <A title="Line 1089: statement executed 245 times."><PRE class="srcLine">&nbsp;            FunctionDescriptor function = (FunctionDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1090
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1090: statement executed 245 times.">&nbsp;245</A>
</TD>

<TD class="srcLine">
   <A title="Line 1090: statement executed 245 times."><PRE class="srcLine">&nbsp;            executeFunction(function, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1091
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1092
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1093
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// check each conditional result</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1094
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1094: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1094: statement executed 378 times."><PRE class="srcLine">&nbsp;        List conditionalResults = action.getConditionalResults();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1095
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1095: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1095: statement executed 378 times."><PRE class="srcLine">&nbsp;        List extraPreFunctions = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1096
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1096: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1096: statement executed 378 times."><PRE class="srcLine">&nbsp;        List extraPostFunctions = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1097
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1097: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1097: statement executed 378 times."><PRE class="srcLine">&nbsp;        ResultDescriptor[] theResults = <span class="keyword">new</span> ResultDescriptor[1];</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1098
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1099
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1099: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1099: statement executed 378 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = conditionalResults.iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1100
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1100: expression evaluated to true 35 times, false 343 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1100: expression evaluated to true 35 times, false 343 times."><PRE class="srcLine">&nbsp;                iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1101
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1101: statement executed 35 times.">&nbsp;35</A>
</TD>

<TD class="srcLine">
   <A title="Line 1101: statement executed 35 times."><PRE class="srcLine">&nbsp;            ConditionalResultDescriptor conditionalResult = (ConditionalResultDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1102
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1103
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1103: expression evaluated to true 35 times, false 0 times.">&nbsp;35</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1103: expression evaluated to true 35 times, false 0 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (passesConditions(conditionalResult.getConditionType(), conditionalResult.getConditions(), Collections.unmodifiableMap(transientVars), ps)) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1104
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                <span class="comment">//if (evaluateExpression(conditionalResult.getCondition(), entry, wf.getRegisters(), null, transientVars)) {</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1105
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1105: statement executed 35 times.">&nbsp;35</A>
</TD>

<TD class="srcLine">
   <A title="Line 1105: statement executed 35 times."><PRE class="srcLine">&nbsp;                theResults[0] = conditionalResult;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1106
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1106: statement executed 35 times.">&nbsp;35</A>
</TD>

<TD class="srcLine">
   <A title="Line 1106: statement executed 35 times."><PRE class="srcLine">&nbsp;                verifyInputs(entry, conditionalResult.getValidators(), Collections.unmodifiableMap(transientVars), ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1107
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1107: statement executed 35 times.">&nbsp;35</A>
</TD>

<TD class="srcLine">
   <A title="Line 1107: statement executed 35 times."><PRE class="srcLine">&nbsp;                extraPreFunctions = conditionalResult.getPreFunctions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1108
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1108: statement executed 35 times.">&nbsp;35</A>
</TD>

<TD class="srcLine">
   <A title="Line 1108: statement executed 35 times."><PRE class="srcLine">&nbsp;                extraPostFunctions = conditionalResult.getPostFunctions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1109
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1110
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1110: statement executed 35 times.">&nbsp;35</A>
</TD>

<TD class="srcLine">
   <A title="Line 1110: statement executed 35 times."><PRE class="srcLine">&nbsp;                <span class="keyword">break</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1111
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1112
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1113
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1114
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// use unconditional-result if a condition hasn't been met</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1115
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1115: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1115: statement executed 378 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (theResults[0] == <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1116
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1116: statement executed 343 times.">&nbsp;343</A>
</TD>

<TD class="srcLine">
   <A title="Line 1116: statement executed 343 times."><PRE class="srcLine">&nbsp;            theResults[0] = action.getUnconditionalResult();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1117
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1117: statement executed 343 times.">&nbsp;343</A>
</TD>

<TD class="srcLine">
   <A title="Line 1117: statement executed 343 times."><PRE class="srcLine">&nbsp;            verifyInputs(entry, theResults[0].getValidators(), Collections.unmodifiableMap(transientVars), ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1118
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1118: statement executed 343 times.">&nbsp;343</A>
</TD>

<TD class="srcLine">
   <A title="Line 1118: statement executed 343 times."><PRE class="srcLine">&nbsp;            extraPreFunctions = theResults[0].getPreFunctions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1119
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1119: statement executed 343 times.">&nbsp;343</A>
</TD>

<TD class="srcLine">
   <A title="Line 1119: statement executed 343 times."><PRE class="srcLine">&nbsp;            extraPostFunctions = theResults[0].getPostFunctions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1120
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1121
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1122
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1122: expression evaluated to true 0 times, false 378 times.">&nbsp;378</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1122: expression evaluated to true 0 times, false 378 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (log.isDebugEnabled()) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1123
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1123: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1123: statement not executed."><PRE class="srcLine">&nbsp;            log.debug(<span class="string">"theResult="</span> + theResults[0].getStep() + <span class="string">" "</span> + theResults[0].getStatus());</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1124
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1125
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1126
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1126: expression evaluated to true 378 times, false 0 times.">&nbsp;378</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1126: expression evaluated to true 378 times, false 0 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (extraPreFunctions != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1127
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// run any extra pre-functions that haven't been run already</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1128
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1128: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1128: statement executed 378 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (Iterator iterator = extraPreFunctions.iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1129
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1129: expression evaluated to true 7 times, false 378 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 1129: expression evaluated to true 7 times, false 378 times."><PRE class="srcLine">&nbsp;                    iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1130
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1130: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 1130: statement executed 7 times."><PRE class="srcLine">&nbsp;                FunctionDescriptor function = (FunctionDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1131
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1131: statement executed 7 times.">&nbsp;7</A>
</TD>

<TD class="srcLine">
   <A title="Line 1131: statement executed 7 times."><PRE class="srcLine">&nbsp;                executeFunction(function, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1132
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1133
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1134
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1135
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// go to next step</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1136
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1136: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1136: statement executed 378 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (theResults[0].getSplit() != 0) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1137
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// the result is a split request, handle it correctly</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1138
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1138: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1138: statement executed 42 times."><PRE class="srcLine">&nbsp;            SplitDescriptor splitDesc = wf.getSplit(theResults[0].getSplit());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1139
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1139: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1139: statement executed 42 times."><PRE class="srcLine">&nbsp;            Collection results = splitDesc.getResults();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1140
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1140: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1140: statement executed 42 times."><PRE class="srcLine">&nbsp;            List splitPreFunctions = <span class="keyword">new</span> ArrayList();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1141
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1141: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1141: statement executed 42 times."><PRE class="srcLine">&nbsp;            List splitPostFunctions = <span class="keyword">new</span> ArrayList();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1142
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1143
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1143: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1143: statement executed 42 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (Iterator iterator = results.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1144
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1144: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1144: statement executed 84 times."><PRE class="srcLine">&nbsp;                ResultDescriptor resultDescriptor = (ResultDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1145
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1145: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1145: statement executed 84 times."><PRE class="srcLine">&nbsp;                verifyInputs(entry, resultDescriptor.getValidators(), Collections.unmodifiableMap(transientVars), ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1146
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1146: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1146: statement executed 84 times."><PRE class="srcLine">&nbsp;                splitPreFunctions.addAll(resultDescriptor.getPreFunctions());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1147
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1147: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1147: statement executed 84 times."><PRE class="srcLine">&nbsp;                splitPostFunctions.addAll(resultDescriptor.getPostFunctions());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1148
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1149
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1150
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// now execute the pre-functions</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1151
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1151: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1151: statement executed 42 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (Iterator iterator = splitPreFunctions.iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1152
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1152: expression evaluated to true 0 times, false 42 times.">&nbsp;42</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1152: expression evaluated to true 0 times, false 42 times."><PRE class="srcLine">&nbsp;                    iterator.hasNext();) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1153
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1153: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1153: statement not executed."><PRE class="srcLine">&nbsp;                FunctionDescriptor function = (FunctionDescriptor) iterator.next();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1154
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1154: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1154: statement not executed."><PRE class="srcLine">&nbsp;                executeFunction(function, transientVars, ps);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1155
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1156
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1157
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// now make these steps...</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1158
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1158: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1158: statement executed 42 times."><PRE class="srcLine">&nbsp;            <span class="keyword">boolean</span> moveFirst = <span class="keyword">true</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1159
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1160
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1160: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1160: statement executed 42 times."><PRE class="srcLine">&nbsp;            theResults = <span class="keyword">new</span> ResultDescriptor[results.size()];</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1161
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1161: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1161: statement executed 42 times."><PRE class="srcLine">&nbsp;            results.toArray(theResults);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1162
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1163
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1163: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1163: statement executed 42 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (Iterator iterator = results.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1164
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1164: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1164: statement executed 84 times."><PRE class="srcLine">&nbsp;                ResultDescriptor resultDescriptor = (ResultDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1165
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1165: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1165: statement executed 84 times."><PRE class="srcLine">&nbsp;                Step moveToHistoryStep = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1166
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1167
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1167: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1167: statement executed 84 times."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> (moveFirst) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1168
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1168: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1168: statement executed 42 times."><PRE class="srcLine">&nbsp;                    moveToHistoryStep = step;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1169
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1170
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1171
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1171: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1171: statement executed 84 times."><PRE class="srcLine">&nbsp;                <span class="keyword">long</span>[] previousIds = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1172
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1173
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1173: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1173: statement executed 84 times."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> (step != <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1174
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1174: statement executed 70 times.">&nbsp;70</A>
</TD>

<TD class="srcLine">
   <A title="Line 1174: statement executed 70 times."><PRE class="srcLine">&nbsp;                    previousIds = <span class="keyword">new</span> <span class="keyword">long</span>[] {step.getId()};</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1175
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1176
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1177
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1177: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1177: statement executed 84 times."><PRE class="srcLine">&nbsp;                createNewCurrentStep(resultDescriptor, entry, store, action.getId(), moveToHistoryStep, previousIds, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1178
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1178: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1178: statement executed 84 times."><PRE class="srcLine">&nbsp;                moveFirst = <span class="keyword">false</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1179
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1180
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1181
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// now execute the post-functions</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1182
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1182: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1182: statement executed 42 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (Iterator iterator = splitPostFunctions.iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1183
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1183: expression evaluated to true 0 times, false 42 times.">&nbsp;42</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1183: expression evaluated to true 0 times, false 42 times."><PRE class="srcLine">&nbsp;                    iterator.hasNext();) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1184
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1184: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1184: statement not executed."><PRE class="srcLine">&nbsp;                FunctionDescriptor function = (FunctionDescriptor) iterator.next();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1185
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1185: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1185: statement not executed."><PRE class="srcLine">&nbsp;                executeFunction(function, transientVars, ps);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1186
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1187
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1187: statement executed 336 times.">&nbsp;336</A>
</TD>

<TD class="srcLine">
   <A title="Line 1187: statement executed 336 times."><PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> <span class="keyword">if</span> (theResults[0].getJoin() != 0) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1188
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// this is a join, finish this step...</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1189
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1189: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1189: statement executed 56 times."><PRE class="srcLine">&nbsp;            JoinDescriptor joinDesc = wf.getJoin(theResults[0].getJoin());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1190
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1190: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1190: statement executed 56 times."><PRE class="srcLine">&nbsp;            step = store.markFinished(step, action.getId(), <span class="keyword">new</span> Date(), theResults[0].getOldStatus(), context.getCaller());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1191
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1192
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// ... now check to see if the expression evaluates</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1193
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// (get only current steps that have a result to this join)</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1194
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1194: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1194: statement executed 56 times."><PRE class="srcLine">&nbsp;            ArrayList joinSteps = <span class="keyword">new</span> ArrayList();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1195
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1195: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1195: statement executed 56 times."><PRE class="srcLine">&nbsp;            joinSteps.add(step);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1196
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1197
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">//currentSteps = store.findCurrentSteps(id); // shouldn't need to refresh the list</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1198
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1198: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1198: statement executed 56 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (Iterator iterator = currentSteps.iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1199
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1199: expression evaluated to true 112 times, false 56 times.">&nbsp;168</A>
</TD>

<TD class="srcLine">
   <A title="Line 1199: expression evaluated to true 112 times, false 56 times."><PRE class="srcLine">&nbsp;                    iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1200
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1200: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 1200: statement executed 112 times."><PRE class="srcLine">&nbsp;                Step currentStep = (Step) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1201
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1202
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1202: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 1202: statement executed 112 times."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> (currentStep.getId() != step.getId()) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1203
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1203: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1203: statement executed 56 times."><PRE class="srcLine">&nbsp;                    StepDescriptor stepDesc = wf.getStep(currentStep.getStepId());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1204
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1205
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1205: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1205: statement executed 56 times."><PRE class="srcLine">&nbsp;                    <span class="keyword">if</span> (stepDesc.resultsInJoin(theResults[0].getJoin())) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1206
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1206: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1206: statement executed 28 times."><PRE class="srcLine">&nbsp;                        joinSteps.add(currentStep);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1207
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1208
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1209
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1210
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1211
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1211: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1211: statement executed 56 times."><PRE class="srcLine">&nbsp;            JoinNodes jn = <span class="keyword">new</span> JoinNodes(joinSteps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1212
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1212: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1212: statement executed 56 times."><PRE class="srcLine">&nbsp;            transientVars.put(<span class="string">"jn"</span>, jn);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1213
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1214
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1214: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1214: statement executed 56 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (passesConditions(joinDesc.getConditionType(), joinDesc.getConditions(), Collections.unmodifiableMap(transientVars), ps)) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1215
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                <span class="comment">// move the rest without creating a new step ...</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1216
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1216: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1216: statement executed 28 times."><PRE class="srcLine">&nbsp;                ResultDescriptor joinresult = joinDesc.getResult();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1217
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1217: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1217: statement executed 28 times."><PRE class="srcLine">&nbsp;                verifyInputs(entry, joinresult.getValidators(), Collections.unmodifiableMap(transientVars), ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1218
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1219
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                <span class="comment">// now execute the pre-functions</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1220
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1220: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1220: statement executed 28 times."><PRE class="srcLine">&nbsp;                <span class="keyword">for</span> (Iterator iterator = joinresult.getPreFunctions().iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1221
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1221: expression evaluated to true 0 times, false 28 times.">&nbsp;28</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1221: expression evaluated to true 0 times, false 28 times."><PRE class="srcLine">&nbsp;                        iterator.hasNext();) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1222
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1222: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1222: statement not executed."><PRE class="srcLine">&nbsp;                    FunctionDescriptor function = (FunctionDescriptor) iterator.next();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1223
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1223: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1223: statement not executed."><PRE class="srcLine">&nbsp;                    executeFunction(function, transientVars, ps);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1224
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1225
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1226
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1226: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1226: statement executed 28 times."><PRE class="srcLine">&nbsp;                <span class="keyword">long</span>[] previousIds = <span class="keyword">new</span> <span class="keyword">long</span>[joinSteps.size()];</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1227
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1227: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1227: statement executed 28 times."><PRE class="srcLine">&nbsp;                <span class="keyword">int</span> i = 1;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1228
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1229
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1229: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1229: statement executed 28 times."><PRE class="srcLine">&nbsp;                <span class="keyword">for</span> (Iterator iterator = joinSteps.iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1230
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1230: expression evaluated to true 56 times, false 28 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1230: expression evaluated to true 56 times, false 28 times."><PRE class="srcLine">&nbsp;                        iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1231
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1231: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1231: statement executed 56 times."><PRE class="srcLine">&nbsp;                    Step currentStep = (Step) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1232
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1233
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1233: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1233: statement executed 56 times."><PRE class="srcLine">&nbsp;                    <span class="keyword">if</span> (currentStep.getId() != step.getId()) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1234
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                        <span class="comment">//store.moveToHistory(currentStep.getActionId(), currentStep.getFinishDate(), currentStep, theResult.getOldStatus(), context.getCaller());</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1235
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1235: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1235: statement executed 28 times."><PRE class="srcLine">&nbsp;                        store.moveToHistory(currentStep);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1236
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1236: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1236: statement executed 28 times."><PRE class="srcLine">&nbsp;                        previousIds[i] = currentStep.getId();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1237
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1237: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1237: statement executed 28 times."><PRE class="srcLine">&nbsp;                        i++;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1238
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1239
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1240
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1241
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                <span class="comment">// ... now finish this step normally</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1242
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1242: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1242: statement executed 28 times."><PRE class="srcLine">&nbsp;                previousIds[0] = step.getId();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1243
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1243: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1243: statement executed 28 times."><PRE class="srcLine">&nbsp;                theResults[0] = joinDesc.getResult();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1244
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1244: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1244: statement executed 28 times."><PRE class="srcLine">&nbsp;                createNewCurrentStep(joinDesc.getResult(), entry, store, action.getId(), step, previousIds, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1245
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1246
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                <span class="comment">// now execute the post-functions</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1247
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1247: statement executed 28 times.">&nbsp;28</A>
</TD>

<TD class="srcLine">
   <A title="Line 1247: statement executed 28 times."><PRE class="srcLine">&nbsp;                <span class="keyword">for</span> (Iterator iterator = joinresult.getPostFunctions().iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1248
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1248: expression evaluated to true 0 times, false 28 times.">&nbsp;28</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1248: expression evaluated to true 0 times, false 28 times."><PRE class="srcLine">&nbsp;                        iterator.hasNext();) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1249
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1249: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1249: statement not executed."><PRE class="srcLine">&nbsp;                    FunctionDescriptor function = (FunctionDescriptor) iterator.next();</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1250
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1250: statement not executed.">&nbsp;0</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1250: statement not executed."><PRE class="srcLine">&nbsp;                    executeFunction(function, transientVars, ps);</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1251
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1252
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1253
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        } <span class="keyword">else</span> {</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1254
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            <span class="comment">// normal finish, no splits or joins</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1255
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1255: statement executed 280 times.">&nbsp;280</A>
</TD>

<TD class="srcLine">
   <A title="Line 1255: statement executed 280 times."><PRE class="srcLine">&nbsp;            <span class="keyword">long</span>[] previousIds = <span class="keyword">null</span>;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1256
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1257
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1257: statement executed 280 times.">&nbsp;280</A>
</TD>

<TD class="srcLine">
   <A title="Line 1257: statement executed 280 times."><PRE class="srcLine">&nbsp;            <span class="keyword">if</span> (step != <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1258
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1258: statement executed 175 times.">&nbsp;175</A>
</TD>

<TD class="srcLine">
   <A title="Line 1258: statement executed 175 times."><PRE class="srcLine">&nbsp;                previousIds = <span class="keyword">new</span> <span class="keyword">long</span>[] {step.getId()};</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1259
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1260
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1261
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1261: statement executed 280 times.">&nbsp;280</A>
</TD>

<TD class="srcLine">
   <A title="Line 1261: statement executed 280 times."><PRE class="srcLine">&nbsp;            createNewCurrentStep(theResults[0], entry, store, action.getId(), step, previousIds, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1262
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1263
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1264
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">// postFunctions (BOTH)</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1265
</TD>

<TD align="right" class="coverageCountHilight">
    <A title="Line 1265: expression evaluated to true 378 times, false 0 times.">&nbsp;378</A>
</TD>

<TD class="srcHilight">
   <SPAN class="srcHilight">
   <A title="Line 1265: expression evaluated to true 378 times, false 0 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (extraPostFunctions != <span class="keyword">null</span>) {</PRE></A>

   </SPAN>
</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1266
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1266: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1266: statement executed 378 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (Iterator iterator = extraPostFunctions.iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1267
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1267: expression evaluated to true 42 times, false 378 times.">&nbsp;420</A>
</TD>

<TD class="srcLine">
   <A title="Line 1267: expression evaluated to true 42 times, false 378 times."><PRE class="srcLine">&nbsp;                    iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1268
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1268: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1268: statement executed 42 times."><PRE class="srcLine">&nbsp;                FunctionDescriptor function = (FunctionDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1269
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1269: statement executed 42 times.">&nbsp;42</A>
</TD>

<TD class="srcLine">
   <A title="Line 1269: statement executed 42 times."><PRE class="srcLine">&nbsp;                executeFunction(function, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1270
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1271
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1272
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1273
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1273: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1273: statement executed 378 times."><PRE class="srcLine">&nbsp;        List postFunctions = action.getPostFunctions();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1274
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1275
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1275: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1275: statement executed 378 times."><PRE class="srcLine">&nbsp;        <span class="keyword">for</span> (Iterator iterator = postFunctions.iterator(); iterator.hasNext();) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1276
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1276: statement executed 35 times.">&nbsp;35</A>
</TD>

<TD class="srcLine">
   <A title="Line 1276: statement executed 35 times."><PRE class="srcLine">&nbsp;            FunctionDescriptor function = (FunctionDescriptor) iterator.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1277
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1277: statement executed 35 times.">&nbsp;35</A>
</TD>

<TD class="srcLine">
   <A title="Line 1277: statement executed 35 times."><PRE class="srcLine">&nbsp;            executeFunction(function, transientVars, ps);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1278
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1279
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1280
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">//if executed action was an initial action then workflow is activated</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1281
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1281: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1281: statement executed 378 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> ((wf.getInitialAction(action.getId()) != <span class="keyword">null</span>) &amp;&amp; (entry.getState() != WorkflowEntry.ACTIVATED)) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1282
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1282: statement executed 112 times.">&nbsp;112</A>
</TD>

<TD class="srcLine">
   <A title="Line 1282: statement executed 112 times."><PRE class="srcLine">&nbsp;            changeEntryState(entry.getId(), WorkflowEntry.ACTIVATED);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1283
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1284
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1285
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        <span class="comment">//we have our results, lets check if we need to autoexec any of them</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1286
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1286: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1286: statement executed 378 times."><PRE class="srcLine">&nbsp;        <span class="keyword">int</span>[] availableActions = getAvailableActions(entry.getId(), inputs);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1287
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1288
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1288: statement executed 378 times.">&nbsp;378</A>
</TD>

<TD class="srcLine">
   <A title="Line 1288: statement executed 378 times."><PRE class="srcLine">&nbsp;        <span class="keyword">if</span> (availableActions.length != 0) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1289
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1289: statement executed 343 times.">&nbsp;343</A>
</TD>

<TD class="srcLine">
   <A title="Line 1289: statement executed 343 times."><PRE class="srcLine">&nbsp;            <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; theResults.length; i++) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1290
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1290: statement executed 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 1290: statement executed 385 times."><PRE class="srcLine">&nbsp;                ResultDescriptor theResult = theResults[i];</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1291
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1291: statement executed 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 1291: statement executed 385 times."><PRE class="srcLine">&nbsp;                StepDescriptor toCheck = wf.getStep(theResult.getStep());</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1292
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1293
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1293: statement executed 385 times.">&nbsp;385</A>
</TD>

<TD class="srcLine">
   <A title="Line 1293: statement executed 385 times."><PRE class="srcLine">&nbsp;                <span class="keyword">if</span> (toCheck != <span class="keyword">null</span>) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1294
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1294: statement executed 357 times.">&nbsp;357</A>
</TD>

<TD class="srcLine">
   <A title="Line 1294: statement executed 357 times."><PRE class="srcLine">&nbsp;                    Iterator iter = toCheck.getActions().iterator();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1295
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1295: statement executed 357 times.">&nbsp;357</A>
</TD>

<TD class="srcLine">
   <A title="Line 1295: statement executed 357 times."><PRE class="srcLine">&nbsp;MAIN: </PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1296
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1296: expression evaluated to true 483 times, false 301 times.">&nbsp;784</A>
</TD>

<TD class="srcLine">
   <A title="Line 1296: expression evaluated to true 483 times, false 301 times."><PRE class="srcLine">&nbsp;                    <span class="keyword">while</span> (iter.hasNext()) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1297
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1297: statement executed 483 times.">&nbsp;483</A>
</TD>

<TD class="srcLine">
   <A title="Line 1297: statement executed 483 times."><PRE class="srcLine">&nbsp;                        ActionDescriptor descriptor = (ActionDescriptor) iter.next();</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1298
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1299
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1299: statement executed 483 times.">&nbsp;483</A>
</TD>

<TD class="srcLine">
   <A title="Line 1299: statement executed 483 times."><PRE class="srcLine">&nbsp;                        <span class="keyword">if</span> (descriptor.getAutoExecute()) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1300
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                            <span class="comment">//check if it's an action we can actually perform</span></PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1301
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1301: statement executed 70 times.">&nbsp;70</A>
</TD>

<TD class="srcLine">
   <A title="Line 1301: statement executed 70 times."><PRE class="srcLine">&nbsp;                            <span class="keyword">for</span> (<span class="keyword">int</span> j = 0; j &lt; availableActions.length; j++) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1302
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1302: statement executed 84 times.">&nbsp;84</A>
</TD>

<TD class="srcLine">
   <A title="Line 1302: statement executed 84 times."><PRE class="srcLine">&nbsp;                                <span class="keyword">if</span> (descriptor.getId() == availableActions[j]) {</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1303
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1303: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1303: statement executed 56 times."><PRE class="srcLine">&nbsp;                                    doAction(entry.getId(), descriptor.getId(), inputs);</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1304
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCountHilight">
    &nbsp;1305
</TD>

<TD align="right" class="lineCountHilight">
    <A title="Line 1305: statement executed 56 times.">&nbsp;56</A>
</TD>

<TD class="srcLine">
   <A title="Line 1305: statement executed 56 times."><PRE class="srcLine">&nbsp;                                    <span class="keyword">break</span> MAIN;</PRE></A>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1306
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1307
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1308
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1309
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1310
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;                }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1311
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;            }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1312
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;        }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1313
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;    }</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1314
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;}</PRE>

</TD>

</TR>
 <TR>

 <TD align="right" class="lineCount">
    &nbsp;1315
</TD>

<TD align="right" class="coverageCount">
      &nbsp;&nbsp;
</TD>

<TD class="srcLine">
      <PRE class="srcLine">&nbsp;</PRE>

</TD>

</TR>
</TBODY>
</TABLE>
<TABLE width="100%">
<TR><TD class="hbreak" colspan="6">&nbsp;</TD></TR>
<TR><TD class="footer" colspan="6">
<table>
<tr>
 <td><a target="_new" href="http://www.thecortex.net/clover"><img alt="Clover" src="../../../img/logo.gif" border="0"></a></td><td nowrap><i>Report generated by </i><a target="_new" href="http://www.thecortex.net/clover">Clover v1.2</a><i><BR>Wed Oct 8 2003 23:00:13 EDT</i>.</td>
<td>&nbsp;</td><td style="BORDER-LEFT: #9c9c9c 1px solid;">&nbsp;</td><td>Open Source License registered to the OpenSymphony Project. This license of Clover is provided to support the development of OpenSymphony only. </td>
</tr>
</table>
</td>
</tr></TABLE>
